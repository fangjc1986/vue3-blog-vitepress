import{e as L,c as z,k as d,p as c,z as B,u as Z,q as ss,a0 as H,r as C,A as is,j as F,v as l,n as g,F as v,P as _,l as m,m as n,y as r,s as as,a5 as ns,a6 as ls,a7 as hs,Q as ks}from"./chunks/framework.CJbAbIn5.js";import{n as ps}from"./chunks/cmm.util.DHcnOQso.js";import{M as U}from"./chunks/theme.CxdAxQpP.js";class w{constructor(i,e){this.checked=!1,this.color=i,this.number=e}}const W=[{name:"一等奖",balls:[[6,1]],prize:5e6},{name:"二等奖",balls:[[6,0]],prize:1e6},{name:"三等奖",balls:[[5,1]],prize:3e3},{name:"四等奖",balls:[[5,0],[4,1]],prize:200},{name:"五等奖",balls:[[4,0],[3,1]],prize:10},{name:"六等奖",balls:[[2,1],[1,1]],prize:5}];class P{constructor(i,e,E=1){this.price=2,this.totalPrice=0,this.isComplex=!1,this.isValid=!0,this.win=-2,this.winPrize=0,this.probability=0,this.redBalls=i,this.blueBalls=e,this.redNums=i.map(u=>u.number),this.blueNums=e.map(u=>u.number),this.qty=E,this.refresh()}getBalls(){return this.redBalls.concat(this.blueBalls)}refresh(){if(this.redBalls.length<6||this.blueBalls.length<1){this.isValid=!1,this.price=0,this.totalPrice=0;return}this.isValid=!0,this.isComplex=this.redBalls.length>6||this.blueBalls.length>1,this.price=this.isComplex?O(this.redBalls.length,6)*this.blueBalls.length*2:2,this.totalPrice=this.price*this.qty,this.probability=Es(this.redBalls.length,this.blueBalls.length)}computeWin(i){const e=this.redBalls.filter(o=>i.redBalls.includes(o)).length,E=this.blueBalls.filter(o=>i.blueBalls.includes(o)).length,u=[e,E];return this.win=W.findIndex(o=>o.balls.some(b=>b.every((y,R)=>y===u[R]))),this.winPrize=this.win===-1?0:W[this.win].prize*this.qty,this.win}clone(){return new P(this.redBalls.map(i=>i),this.blueBalls.map(i=>i),this.qty)}}class ts{constructor(){this.winCounts=[0,0,0,0,0,0],this.winPrizes=[0,0,0,0,0,0],this.winTotalPrize=0}}class es{constructor(){this.winCounts=[0,0,0,0,0,0],this.winPrizes=[0,0,0,0,0,0],this.winTotalPrize=0,this.results=[]}addResult(i){this.results.length>=100&&this.results.shift(),this.results.push(i);for(let e=0;e<6;e++)this.winCounts[e]+=i.winCounts[e],this.winPrizes[e]+=i.winPrizes[e],this.winTotalPrize+=i.winPrizes[e]}}const O=(t,i)=>$(t,t-i+1)/$(i),$=(t,i=0)=>t===0||t<i?1:t*$(t-1,i),Es=(t,i)=>O(t,6)/O(33,6)*i/16,rs=L({__name:"double-ball-circle",props:{ball:{},colorReverse:{type:Boolean,default:!1},size:{default:40},fontSize:{default:14}},setup(t){const i=t,e=z(()=>{const E=i.size+"px";return{width:E,height:E,lineHeight:E,"font-size":i.fontSize+"px"}});return(E,u)=>(d(),c("div",{class:Z(["ball",[{checked:E.colorReverse?!E.ball.checked:E.ball.checked},E.ball.color]]),style:ss(e.value)},B(E.ball.number),7))}}),T=H(rs,[["__scopeId","data-v-d59130b7"]]),ds=t=>(ls("data-v-769f346c"),t=t(),hs(),t),gs={class:"flex-column wh100p"},ys={class:"flex-horiz ball-container"},Fs={class:"flex-horiz box-card pa-md flex-wrap flex-grow",style:{"justify-content":"flex-start","align-content":"flex-start"}},cs={class:"flex-horiz flex-wrap flex-not-shk ml-md pa-md box-card",style:{width:"37%","justify-content":"flex-start","align-content":"flex-start"}},us={class:"box-card pa-md mtb-md"},os={class:""},bs={class:"flex-horiz pa-sm flex-wrap"},Cs={key:0,class:"text-center"},ms={class:"box-card mt-md flex-horiz pa-md",style:{height:"250px"}},Bs={class:"flex-column flex-grow overflow-h"},As={class:"flex-not-shk flex-horiz"},Ds=ds(()=>g("div",{class:"flex-grow"},null,-1)),fs={class:"flex-grow pa-xs",style:{overflow:"auto"}},qs={class:"flex-horiz mb-xs plr-xs pt-xs",style:{"background-color":"rgb(var(--purple-1))","border-radius":"4px"}},vs={class:"flex-horiz flex-grow flex-wrap"},_s={class:"flex-not-shk"},xs={class:"text-center"},ws=L({__name:"double-ball",setup(t){const i=C("wait"),e=C(),E=C(Array(33).fill(0).map((h,s)=>new w("red",s+1))),u=C(Array(16).fill(0).map((h,s)=>new w("blue",s+1))),o=h=>{h.checked=!h.checked},b=z(()=>{const h=E.value.filter(a=>a.checked),s=u.value.filter(a=>a.checked);return new P(h,s)}),y=C([]),R=z(()=>y.value.reduce((h,s)=>h+s.totalPrice,0)),I=()=>{const h=E.value.map(a=>a.number),s=[];for(let a=0;a<6;a++){const k=Math.floor(Math.random()*h.length);s.push(h[k]),h.splice(k,1)}return new P(s.map(a=>new w("red",a)),[new w("blue",Math.floor(Math.random()*16)+1)])},M=h=>{const s=[];for(let a=0;a<h;a++)s.push(I());return s},S=h=>{y.value.push(...h)},J=h=>{const s=y.value.findIndex(a=>a===h);s>=0&&y.value.splice(s,1)},f=C(52*3),Q=z(()=>{const a=Math.floor(f.value/156),k=Math.ceil(f.value%156/3);let A="";return a>0&&(A+=` ${a} 年`),k>0&&(A+=` ${k} 周`),A});let V=null;is(()=>clearTimeout(V));const G=()=>{if(y.value.length<1)return U.error("请先添加彩票到购物车");if(f.value<1)return U.error("开奖次数必须大于 0");e.value=new es;const h=(s=0)=>{if(s>=y.value.length){i.value="opened";return}const a=new ts;a.ticket=I();for(let k of y.value)k.computeWin(a.ticket),a.sort=s,a.winCounts[k.win]+=k.qty,a.winPrizes[k.win]+=k.winPrize,a.winTotalPrize+=k.winPrize;e.value.addResult(a),V=setTimeout(h.bind(this,s+1),0)};clearTimeout(V),h()};C([]);const N=C(!1);return(h,s)=>{const a=F("a-modal"),k=F("a-tag"),A=F("a-space"),x=F("icon-plus"),D=F("a-button"),j=F("a-divider"),K=F("icon-delete"),X=F("icon-poweroff"),Y=F("a-input-number");return d(),c("div",gs,[l(a,{visible:N.value,"onUpdate:visible":s[0]||(s[0]=p=>N.value=p),title:"开奖结果"},null,8,["visible"]),g("div",ys,[g("div",Fs,[(d(!0),c(v,null,_(E.value,p=>(d(),m(T,{class:"ma-sm",ball:p,onClick:q=>o(p)},{default:n(()=>[r(B(p.number),1)]),_:2},1032,["ball","onClick"]))),256))]),g("div",cs,[(d(!0),c(v,null,_(u.value,p=>(d(),m(T,{class:"ma-sm",ball:p,onClick:q=>o(p)},{default:n(()=>[r(B(p.number),1)]),_:2},1032,["ball","onClick"]))),256))])]),g("div",us,[g("div",os,[b.value.isValid?(d(),m(A,{key:1},{default:n(()=>[b.value.isComplex?(d(),m(k,{key:0,color:"red"},{default:n(()=>[r("复式")]),_:1})):(d(),m(k,{key:1,color:"blue"},{default:n(()=>[r("单注")]),_:1})),l(k,{color:"blue"},{default:n(()=>[r("票价："+B(b.value.totalPrice)+"元",1)]),_:1}),l(k,{color:"cyan"},{default:n(()=>[r("一等奖概率："+B((b.value.probability*100).toFixed(6))+" %",1)]),_:1})]),_:1})):(d(),m(k,{key:0,color:"red"},{default:n(()=>[r("至少选择 6 个红球 和 1 个蓝球")]),_:1}))]),g("div",bs,[(d(!0),c(v,null,_(b.value.getBalls(),p=>(d(),m(T,{class:"ma-sm",ball:p,"color-reverse":!0,onClick:q=>o(p)},null,8,["ball","onClick"]))),256))]),b.value.isValid?(d(),c("div",Cs,[l(D,{type:"primary"},{icon:n(()=>[l(x)]),default:n(()=>[r(" 添加到购物车")]),_:1})])):as("",!0)]),g("div",ms,[g("div",Bs,[g("div",As,[l(k,{color:"blue"},{default:n(()=>[r("购物车")]),_:1}),l(k,{class:"ml-xs"},{default:n(()=>[r("总金额： "+B(ns(ps)(R.value)),1)]),_:1}),Ds,l(D,{size:"mini",type:"primary",onClick:s[1]||(s[1]=p=>y.value=[])},{default:n(()=>[r("清空")]),_:1})]),l(j,{style:{"margin-top":"10px","margin-bottom":"0"}}),g("div",fs,[(d(!0),c(v,null,_(y.value,p=>(d(),c("div",qs,[g("div",vs,[(d(!0),c(v,null,_(p.getBalls(),q=>(d(),m(T,{class:"mr-xs mb-xs",size:20,"font-size":10,ball:q},null,8,["ball"]))),256))]),g("div",_s,[l(K,{class:"cursor-p",onClick:q=>J(p)},null,8,["onClick"])])]))),256))])]),l(j,{direction:"vertical"}),l(A,{direction:"vertical",class:"flex-not-shk ml-md",style:{width:"140px"}},{default:n(()=>[l(D,{long:"",type:"primary",onClick:s[2]||(s[2]=p=>S(M(1)))},{icon:n(()=>[l(x)]),default:n(()=>[r(" 随机 1 注 ")]),_:1}),l(D,{long:"",type:"primary",onClick:s[3]||(s[3]=p=>S(M(10)))},{icon:n(()=>[l(x)]),default:n(()=>[r(" 随机 10 注 ")]),_:1}),l(D,{long:"",type:"primary",onClick:s[4]||(s[4]=p=>S(M(100)))},{icon:n(()=>[l(x)]),default:n(()=>[r(" 随机 100 注 ")]),_:1}),l(D,{long:"",type:"primary",status:"success",onClick:G},{icon:n(()=>[l(X)]),default:n(()=>[r(" 开奖 ")]),_:1}),l(Y,{modelValue:f.value,"onUpdate:modelValue":s[5]||(s[5]=p=>f.value=p)},{prefix:n(()=>[r("开")]),suffix:n(()=>[r("期    ")]),_:1},8,["modelValue"]),g("div",xs,[l(k,{class:""},{default:n(()=>[r("约"+B(Q.value),1)]),_:1})])]),_:1})]),l(a)])}}}),Ts=H(ws,[["__scopeId","data-v-769f346c"]]),zs=ks("",2),Vs=JSON.parse('{"title":"","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"games/double-ball.md","filePath":"games/double-ball.md"}'),Ps={name:"games/double-ball.md"},Os=Object.assign(Ps,{setup(t){return(i,e)=>{const E=F("ClientOnly");return d(),c("div",null,[l(E,null,{default:n(()=>[l(Ts)]),_:1}),zs])}}});export{Vs as __pageData,Os as default};
