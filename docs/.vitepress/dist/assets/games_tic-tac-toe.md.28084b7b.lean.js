import{_ as u}from"./chunks/lodash.783d75e0.js";import{M as v}from"./chunks/ai.util.c92b8d98.js";import{S as x}from"./chunks/start-over-mask.0dc7a504.js";import{d as M,h as b,g as k,_ as I,C as f,o as p,c as o,k as h,t as R,F as d,D as A,n as O,e as D,H as m,w as S,Q as B}from"./chunks/framework.88ad42b5.js";import"./chunks/commonjsHelpers.725317a4.js";const N="/tic-tac-toe/minimax.webp",L="/tic-tac-toe/p2.webp",T=M({name:"tic-tac-toe",components:{StartOverMask:x},props:{},setup(n){let s=b(new Array(9).fill(""));const l=b(1),a=b(!0),t=new v(10).setNextLevelState(w).setIsLeafState(C).setEvaluateResult(P),r=()=>{const e=C(s.value);if(e===!0)return l.value=5;e?l.value=e===y?3:4:s.value.every(E=>E!=="")&&(l.value=5)},i=()=>{if(l.value!==2)return;const e=t.getBestChoiceByState(u.clone(s.value));e!=null&&(s.value=e,a.value=!0,r())};return{X:F,O:y,turnUser:a,gameState:l,chessState:k(()=>u.chunk(s.value,3)),onClickItem:(e,E)=>{if(l.value!==2)return;const c=e*3+E;!a.value||s.value[c]!=""||(a.value=!1,s.value[c]=y,r(),setTimeout(i.bind(this),10))},onClickRestart:()=>{s.value=new Array(9).fill(""),l.value=2,a.value=u.sample([!0,!1]),a.value||setTimeout(i.bind(this),10)}}}}),F="X",y="O",_="",q=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],C=n=>{for(const s of[y,F])if(q.some(l=>l.map(t=>n[t]).every(t=>t===s)))return s;return!!n.every(s=>s!=="")},w=function*(n,s){const l=s.reduce((a,t,r)=>(t===_&&a.push(r),a),[]).sort(()=>Math.random()-.5);for(let a=0;a<l.length;a++)s[l[a]]=n?F:y,yield s,s[l[a]]=_,yield s},P=n=>{const s=C(n);return s===!0?0:s===F?10:-10};const X={class:"tic-tac-toe flex-center-all flex-column vue-component-container"},V={class:"mb-sm"},$={class:"bca-border pos-r",style:{padding:"5px"}},z={class:"row flex-horiz flex-center-all"},U=["onClick"],W={key:0,class:"iconfont icon-close-line"},j={key:1,class:"iconfont icon-checkbox-blank-circle-line",style:{"font-size":"0.8em"}},G={class:"mb-sm",style:{"font-size":"30px"}},H={key:0},J={key:1},Q={key:2};function Y(n,s,l,a,t,r){const i=f("start-over-mask");return p(),o("div",X,[h("div",V,"轮到 "+R(n.turnUser?"您":"AI")+" 走棋",1),h("div",$,[(p(!0),o(d,null,A(n.chessState,(e,E)=>(p(),o("div",z,[(p(!0),o(d,null,A(e,(c,g)=>(p(),o("div",{class:O(["item flex-horiz flex-center-all",[c==="O"?"color-primary":"color-error",c===""?"cursor-p":""]]),onClick:as=>n.onClickItem(E,g)},[c===n.X?(p(),o("i",W)):c===n.O?(p(),o("i",j)):D("",!0)],10,U))),256))]))),256)),m(i,{status:n.gameState,onOnClickStart:n.onClickRestart},{default:S(()=>[h("div",G,[n.gameState===3?(p(),o("span",H,"你赢了")):n.gameState===4?(p(),o("span",J,"你输了")):n.gameState===5?(p(),o("span",Q,"棋逢对手")):D("",!0)])]),_:1},8,["status","onOnClickStart"])])])}const K=I(T,[["render",Y],["__scopeId","data-v-b593245e"]]),Z=B("",4),ss=B("",9),cs=JSON.parse('{"title":"AI 井字棋","description":"","frontmatter":{},"headers":[],"relativePath":"games/tic-tac-toe.md","filePath":"games/tic-tac-toe.md"}'),ns={name:"games/tic-tac-toe.md"},rs=Object.assign(ns,{setup(n){return(s,l)=>{const a=f("ClientOnly");return p(),o("div",null,[Z,m(a,null,{default:S(()=>[m(K)]),_:1}),ss])}}});export{cs as __pageData,rs as default};
