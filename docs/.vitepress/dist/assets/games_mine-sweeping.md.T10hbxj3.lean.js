import"./chunks/array.util.DVdZD237.js";import{e as j,r as d,o as J,w as L,h as c,n as h,k as l,t as g,m as I,l as b,F as A,Q as _,z as G,a5 as D,I as U,s as K,p as P,a6 as W,a7 as Z,a0 as ss,R as Q}from"./chunks/framework.BULi5HC7.js";import{g as is,G as T,i as as,s as ns}from"./chunks/cmm.util.si_FlGxb.js";import"./chunks/number.util.Cpjkx7EM.js";const hs=u=>(W("data-v-77d2d821"),u=u(),Z(),u),ls={class:"flex-column flex-center"},ks={class:"mt-sm container flex-column pa-xs"},ps={class:"row flex-horiz"},ts=["onClick","onContextmenu"],es=hs(()=>I("span",null,null,-1)),Es={key:0,class:"iconfont icon-flag--fill"},rs={key:0,class:"iconfont icon-checkbox-blank-line",style:{color:"rgb(var(--gray-4))"}},ds={key:1,class:"iconfont icon-bug--fill"},gs={key:2,style:{color:"rgb(var(--danger-6))"}},ys={key:3,style:{color:"rgb(var(--primary-6))"}},Fs={key:4,style:{color:"rgb(var(--warning-6))"}},cs={key:5,style:{color:"rgb(var(--green-6))"}},us={key:6,style:{color:"rgb(var(--purple-6))"}},bs={key:7,style:{color:"rgb(var(--gold-6))"}},os={key:8,style:{color:"rgb(var(--cyan-6))"}},Cs={key:9,style:{color:"rgb(var(--pinkpurple-6))"}},ms=j({__name:"mine-sweeping2",setup(u){class x{constructor(i,s,k){this.x=i,this.y=s,this.number=k,this.flag=!1,this.opened=!1,this.gameOver=!1,this.radius=0}isMine(){return this.number===9}isEmpty(){return this.number===0}}const f=[[9,9,5,"极简"],[9,9,10,"简单"],[16,16,40,"中等"],[30,16,99,"困难"]],y=d(0),e=d([]),[E,F,v,o]=[d(9),d(9),d(10),d(0)],V=d(20),q=()=>{o.value=0,[E.value,F.value,v.value]=f[y.value],e.value=is(E.value,F.value,(i,s)=>new x(i,s,0)),new T(T.toArray(0,E.value*F.value-1)).poll(v.value).forEach(i=>{const[s,k]=as(i,E.value);e.value[k][s].number=9}),O((i,s,k)=>{C(s,k,(t,n,m)=>{i.isMine()||t.isMine()&&i.number++})})};J(q),L(y,q);const S=[0,1,0,-1,1,-1,1,-1],$=[-1,0,1,0,1,1,-1,-1],z=async(a,i)=>{const s=e.value[i][a];if(!s.flag){if(!s.opened&&s.isMine())return s.gameOver=!0,await M();if(!s.isEmpty())return s.opened||(s.opened=!0,o.value++),await R(a,i);await w([s])}},R=async(a,i)=>{let[s,k,t]=[0,0,[]];if(C(a,i,(n,m,r)=>{n.opened||(n.flag?s+=1:t.push(n),n.isMine()&&(k+=1))}),!(k!=0&&s!==k)){if(t.some(n=>n.isMine()))return C(a,i,(n,m,r)=>{(!n.flag&&n.isMine()||n.flag&&!n.isMine())&&(n.gameOver=!0)}),await M();await w(t)}},w=async a=>{let i=[];for(;(a.length||i.length)&&(a.length||(a=i,i=[],await ns(V.value)),!!a.length);){const s=a.shift();s.opened||(s.opened=!0,o.value++,s.isEmpty()&&C(s.x,s.y,k=>{i.push(k)}))}},H=(a,i)=>{const s=e.value[i][a];s.opened||(s.flag=!s.flag)},C=(a,i,s)=>{for(let k=0;k<8;k++){const[t,n]=[a+S[k],i+$[k]];X(t,n)&&s(e.value[n][t],t,n)}},O=a=>{for(let i=0;i<F.value;i++)for(let s=0;s<E.value;s++)a(e.value[i][s],s,i)},X=(a,i)=>a>=0&&a<E.value&&i>=0&&i<F.value,M=async()=>{O((a,i,s)=>a.opened=!0)};return(a,i)=>{const s=c("a-option"),k=c("a-select"),t=c("a-button"),n=c("a-input"),m=c("a-space");return l(),h("div",ls,[g(m,{direction:"horizontal"},{default:b(()=>[g(k,{modelValue:y.value,"onUpdate:modelValue":i[0]||(i[0]=r=>y.value=r)},{default:b(()=>[(l(),h(A,null,_(f,(r,B)=>g(s,{label:r[3],value:B},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),g(t,{onClick:q},{default:b(()=>[G("刷新雷数量")]),_:1}),g(n,{disabled:"","read-only":"","model-value":`${D(o)} / ${D(E)*D(F)-D(v)}`,style:{width:"180px"}},{prefix:b(()=>[G("扫雷进度")]),_:1},8,["model-value"])]),_:1}),I("div",ks,[(l(!0),h(A,null,_(e.value,(r,B)=>(l(),h("div",ps,[(l(!0),h(A,null,_(r,(p,N)=>(l(),h("div",{class:K(["item flex-horiz flex-not-shk flex-center-all",[{opened:p.opened,gameOver:p.gameOver,mine:p.isMine(),empty:p.isEmpty(),radius:p.radius}]]),onClick:Y=>z(N,B),onContextmenu:U(Y=>H(N,B),["prevent"])},[es,p.flag?(l(),h("span",Es)):p.opened?(l(),h(A,{key:1},[p.isEmpty()?(l(),h("span",rs)):p.isMine()?(l(),h("span",ds)):p.number===1?(l(),h("span",gs,"1")):p.number===2?(l(),h("span",ys,"2")):p.number===3?(l(),h("span",Fs,"3")):p.number===4?(l(),h("span",cs,"4")):p.number===5?(l(),h("span",us,"5")):p.number===6?(l(),h("span",bs,"6")):p.number===7?(l(),h("span",os,"7")):p.number===8?(l(),h("span",Cs,"8")):P("",!0)],64)):P("",!0)],42,ts))),256))]))),256))])])}}}),Bs=ss(ms,[["__scopeId","data-v-77d2d821"]]),As=Q("",4),Ds=Q("",2),ws=JSON.parse('{"title":"经典连连看","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"games/mine-sweeping.md","filePath":"games/mine-sweeping.md"}'),fs={name:"games/mine-sweeping.md"},Os=Object.assign(fs,{setup(u){return(x,f)=>{const y=c("ClientOnly");return l(),h("div",null,[As,g(y,null,{default:b(()=>[g(Bs)]),_:1}),Ds])}}});export{ws as __pageData,Os as default};
