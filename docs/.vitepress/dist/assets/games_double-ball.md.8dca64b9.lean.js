import{d as L,g as z,o as i,c as d,t as D,n as Z,N as ss,_ as H,h as B,a1 as ns,C as m,H as o,k as F,F as k,D as x,b as A,w as p,a as y,e as as,l as ls,p as ps,m as os,Q as es}from"./chunks/framework.aa4ce59a.js";import{M as U}from"./chunks/index.1d357f71.js";class T{constructor(s,c){this.checked=!1,this.color=s,this.number=c}}const W=[{name:"一等奖",balls:[[6,1]],prize:5e6},{name:"二等奖",balls:[[6,0]],prize:1e6},{name:"三等奖",balls:[[5,1]],prize:3e3},{name:"四等奖",balls:[[5,0],[4,1]],prize:200},{name:"五等奖",balls:[[4,0],[3,1]],prize:10},{name:"六等奖",balls:[[2,1],[1,1]],prize:5}];class P{constructor(s,c,l=1){this.price=2,this.totalPrice=0,this.isComplex=!1,this.isValid=!0,this.win=-2,this.winPrize=0,this.probability=0,this.redBalls=s,this.blueBalls=c,this.redNums=s.map(u=>u.number),this.blueNums=c.map(u=>u.number),this.qty=l,this.refresh()}getBalls(){return this.redBalls.concat(this.blueBalls)}refresh(){if(this.redBalls.length<6||this.blueBalls.length<1){this.isValid=!1,this.price=0,this.totalPrice=0;return}this.isValid=!0,this.isComplex=this.redBalls.length>6||this.blueBalls.length>1,this.price=this.isComplex?V(this.redBalls.length,6)*this.blueBalls.length*2:2,this.totalPrice=this.price*this.qty,this.probability=rs(this.redBalls.length,this.blueBalls.length)}computeWin(s){const c=this.redBalls.filter(C=>s.redBalls.includes(C)).length,l=this.blueBalls.filter(C=>s.blueBalls.includes(C)).length,u=[c,l];return this.win=W.findIndex(C=>C.balls.some(g=>g.every((b,R)=>b===u[R]))),this.winPrize=this.win===-1?0:W[this.win].prize*this.qty,this.win}clone(){return new P(this.redBalls.map(s=>s),this.blueBalls.map(s=>s),this.qty)}}class ts{constructor(){this.winCounts=[0,0,0,0,0,0],this.winPrizes=[0,0,0,0,0,0],this.winTotalPrize=0}}class cs{constructor(){this.winCounts=[0,0,0,0,0,0],this.winPrizes=[0,0,0,0,0,0],this.winTotalPrize=0,this.results=[]}addResult(s){this.results.length>=100&&this.results.shift(),this.results.push(s);for(let c=0;c<6;c++)this.winCounts[c]+=s.winCounts[c],this.winPrizes[c]+=s.winPrizes[c],this.winTotalPrize+=s.winPrizes[c]}}const V=(t,s)=>$(t,t-s+1)/$(s),$=(t,s=0)=>t===0||t<s?1:t*$(t-1,s),rs=(t,s)=>V(t,6)/V(33,6)*s/16,Es=L({__name:"double-ball-circle",props:{ball:{},colorReverse:{type:Boolean,default:!1},size:{default:40},fontSize:{default:14}},setup(t){const s=t,c=z(()=>{const l=s.size+"px";return{width:l,height:l,lineHeight:l,"font-size":s.fontSize+"px"}});return(l,u)=>(i(),d("div",{class:Z(["ball",[{checked:l.colorReverse?!l.ball.checked:l.ball.checked},l.ball.color]]),style:ss(c.value)},D(l.ball.number),7))}});const _=H(Es,[["__scopeId","data-v-d59130b7"]]),ys=(t,s=3,c=",")=>{let l=t+"",u=l.indexOf(".");for(u===-1?u=l.length-s:u-=s;u>0;)l=l.slice(0,u)+c+l.slice(u),u-=s;return l},is=t=>(ps("data-v-769f346c"),t=t(),os(),t),us={class:"flex-column wh100p"},Fs={class:"flex-horiz ball-container"},bs={class:"flex-horiz box-card pa-md flex-wrap flex-grow",style:{"justify-content":"flex-start","align-content":"flex-start"}},ms={class:"flex-horiz flex-wrap flex-not-shk ml-md pa-md box-card",style:{width:"37%","justify-content":"flex-start","align-content":"flex-start"}},ds={class:"box-card pa-md mtb-md"},Cs={class:""},gs={class:"flex-horiz pa-sm flex-wrap"},Bs={key:0,class:"text-center"},As={class:"box-card mt-md flex-horiz pa-md",style:{height:"250px"}},Ds={class:"flex-column flex-grow overflow-h"},qs={class:"flex-not-shk flex-horiz"},fs=is(()=>F("div",{class:"flex-grow"},null,-1)),hs={class:"flex-grow pa-xs",style:{overflow:"auto"}},vs={class:"flex-horiz mb-xs plr-xs pt-xs",style:{"background-color":"rgb(var(--purple-1))","border-radius":"4px"}},ks={class:"flex-horiz flex-grow flex-wrap"},xs={class:"flex-not-shk"},ws={class:"text-center"},Ts=L({__name:"double-ball",setup(t){const s=B("wait"),c=B(),l=B(Array(33).fill(0).map((e,n)=>new T("red",n+1))),u=B(Array(16).fill(0).map((e,n)=>new T("blue",n+1))),C=e=>{e.checked=!e.checked},g=z(()=>{const e=l.value.filter(a=>a.checked),n=u.value.filter(a=>a.checked);return new P(e,n)}),b=B([]),R=z(()=>b.value.reduce((e,n)=>e+n.totalPrice,0)),I=()=>{const e=l.value.map(a=>a.number),n=[];for(let a=0;a<6;a++){const r=Math.floor(Math.random()*e.length);n.push(e[r]),e.splice(r,1)}return new P(n.map(a=>new T("red",a)),[new T("blue",Math.floor(Math.random()*16)+1)])},M=e=>{const n=[];for(let a=0;a<e;a++)n.push(I());return n},O=e=>{b.value.push(...e)},J=e=>{const n=b.value.findIndex(a=>a===e);n>=0&&b.value.splice(n,1)},h=B(52*3),Q=z(()=>{const a=Math.floor(h.value/156),r=Math.ceil(h.value%156/3);let q="";return a>0&&(q+=` ${a} 年`),r>0&&(q+=` ${r} 周`),q});let S=null;ns(()=>clearTimeout(S));const G=()=>{if(b.value.length<1)return U.error("请先添加彩票到购物车");if(h.value<1)return U.error("开奖次数必须大于 0");c.value=new cs;const e=(n=0)=>{if(n>=b.value.length){s.value="opened";return}const a=new ts;a.ticket=I();for(let r of b.value)r.computeWin(a.ticket),a.sort=n,a.winCounts[r.win]+=r.qty,a.winPrizes[r.win]+=r.winPrize,a.winTotalPrize+=r.winPrize;c.value.addResult(a),S=setTimeout(e.bind(this,n+1),0)};clearTimeout(S),e()};B([]);const N=B(!1);return(e,n)=>{const a=m("a-modal"),r=m("a-tag"),q=m("a-space"),w=m("icon-plus"),f=m("a-button"),j=m("a-divider"),K=m("icon-delete"),X=m("icon-poweroff"),Y=m("a-input-number");return i(),d("div",us,[o(a,{visible:N.value,"onUpdate:visible":n[0]||(n[0]=E=>N.value=E),title:"开奖结果"},null,8,["visible"]),F("div",Fs,[F("div",bs,[(i(!0),d(k,null,x(l.value,E=>(i(),A(_,{class:"ma-sm",ball:E,onClick:v=>C(E)},{default:p(()=>[y(D(E.number),1)]),_:2},1032,["ball","onClick"]))),256))]),F("div",ms,[(i(!0),d(k,null,x(u.value,E=>(i(),A(_,{class:"ma-sm",ball:E,onClick:v=>C(E)},{default:p(()=>[y(D(E.number),1)]),_:2},1032,["ball","onClick"]))),256))])]),F("div",ds,[F("div",Cs,[g.value.isValid?(i(),A(q,{key:1},{default:p(()=>[g.value.isComplex?(i(),A(r,{key:0,color:"red"},{default:p(()=>[y("复式")]),_:1})):(i(),A(r,{key:1,color:"blue"},{default:p(()=>[y("单注")]),_:1})),o(r,{color:"blue"},{default:p(()=>[y("票价："+D(g.value.totalPrice)+"元",1)]),_:1}),o(r,{color:"cyan"},{default:p(()=>[y("一等奖概率："+D((g.value.probability*100).toFixed(6))+" %",1)]),_:1})]),_:1})):(i(),A(r,{key:0,color:"red"},{default:p(()=>[y("至少选择 6 个红球 和 1 个蓝球")]),_:1}))]),F("div",gs,[(i(!0),d(k,null,x(g.value.getBalls(),E=>(i(),A(_,{class:"ma-sm",ball:E,"color-reverse":!0,onClick:v=>C(E)},null,8,["ball","onClick"]))),256))]),g.value.isValid?(i(),d("div",Bs,[o(f,{type:"primary"},{icon:p(()=>[o(w)]),default:p(()=>[y(" 添加到购物车")]),_:1})])):as("",!0)]),F("div",As,[F("div",Ds,[F("div",qs,[o(r,{color:"blue"},{default:p(()=>[y("购物车")]),_:1}),o(r,{class:"ml-xs"},{default:p(()=>[y("总金额： "+D(ls(ys)(R.value)),1)]),_:1}),fs,o(f,{size:"mini",type:"primary",onClick:n[1]||(n[1]=E=>b.value=[])},{default:p(()=>[y("清空")]),_:1})]),o(j,{style:{"margin-top":"10px","margin-bottom":"0"}}),F("div",hs,[(i(!0),d(k,null,x(b.value,E=>(i(),d("div",vs,[F("div",ks,[(i(!0),d(k,null,x(E.getBalls(),v=>(i(),A(_,{class:"mr-xs mb-xs",size:20,"font-size":10,ball:v},null,8,["ball"]))),256))]),F("div",xs,[o(K,{class:"cursor-p",onClick:v=>J(E)},null,8,["onClick"])])]))),256))])]),o(j,{direction:"vertical"}),o(q,{direction:"vertical",class:"flex-not-shk ml-md",style:{width:"140px"}},{default:p(()=>[o(f,{long:"",type:"primary",onClick:n[2]||(n[2]=E=>O(M(1)))},{icon:p(()=>[o(w)]),default:p(()=>[y(" 随机 1 注 ")]),_:1}),o(f,{long:"",type:"primary",onClick:n[3]||(n[3]=E=>O(M(10)))},{icon:p(()=>[o(w)]),default:p(()=>[y(" 随机 10 注 ")]),_:1}),o(f,{long:"",type:"primary",onClick:n[4]||(n[4]=E=>O(M(100)))},{icon:p(()=>[o(w)]),default:p(()=>[y(" 随机 100 注 ")]),_:1}),o(f,{long:"",type:"primary",status:"success",onClick:G},{icon:p(()=>[o(X)]),default:p(()=>[y(" 开奖 ")]),_:1}),o(Y,{modelValue:h.value,"onUpdate:modelValue":n[5]||(n[5]=E=>h.value=E)},{prefix:p(()=>[y("开")]),suffix:p(()=>[y("期    ")]),_:1},8,["modelValue"]),F("div",ws,[o(r,{class:""},{default:p(()=>[y("约"+D(Q.value),1)]),_:1})])]),_:1})]),o(a)])}}});const _s=H(Ts,[["__scopeId","data-v-769f346c"]]),zs=es("",2),Os=JSON.parse('{"title":"","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"games/double-ball.md","filePath":"games/double-ball.md"}'),Ps={name:"games/double-ball.md"},Ss=Object.assign(Ps,{setup(t){return(s,c)=>{const l=m("ClientOnly");return i(),d("div",null,[o(l,null,{default:p(()=>[o(_s)]),_:1}),zs])}}});export{Os as __pageData,Ss as default};
