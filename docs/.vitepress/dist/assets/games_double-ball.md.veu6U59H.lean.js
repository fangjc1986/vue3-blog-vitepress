import{e as L,c as z,k as d,p as u,z as B,u as Z,q as ss,a0 as H,r as C,A as is,j as c,v as h,n as y,F as v,P as _,l as m,m as l,y as r,s as as,a5 as ns,a6 as ls,a7 as hs,Q as ks}from"./chunks/framework.Cg7Czl7i.js";import{M as U}from"./chunks/theme.Bss3IADF.js";class w{constructor(s,t){this.checked=!1,this.color=s,this.number=t}}const W=[{name:"一等奖",balls:[[6,1]],prize:5e6},{name:"二等奖",balls:[[6,0]],prize:1e6},{name:"三等奖",balls:[[5,1]],prize:3e3},{name:"四等奖",balls:[[5,0],[4,1]],prize:200},{name:"五等奖",balls:[[4,0],[3,1]],prize:10},{name:"六等奖",balls:[[2,1],[1,1]],prize:5}];class P{constructor(s,t,n=1){this.price=2,this.totalPrice=0,this.isComplex=!1,this.isValid=!0,this.win=-2,this.winPrize=0,this.probability=0,this.redBalls=s,this.blueBalls=t,this.redNums=s.map(g=>g.number),this.blueNums=t.map(g=>g.number),this.qty=n,this.refresh()}getBalls(){return this.redBalls.concat(this.blueBalls)}refresh(){if(this.redBalls.length<6||this.blueBalls.length<1){this.isValid=!1,this.price=0,this.totalPrice=0;return}this.isValid=!0,this.isComplex=this.redBalls.length>6||this.blueBalls.length>1,this.price=this.isComplex?O(this.redBalls.length,6)*this.blueBalls.length*2:2,this.totalPrice=this.price*this.qty,this.probability=es(this.redBalls.length,this.blueBalls.length)}computeWin(s){const t=this.redBalls.filter(o=>s.redBalls.includes(o)).length,n=this.blueBalls.filter(o=>s.blueBalls.includes(o)).length,g=[t,n];return this.win=W.findIndex(o=>o.balls.some(b=>b.every((F,R)=>F===g[R]))),this.winPrize=this.win===-1?0:W[this.win].prize*this.qty,this.win}clone(){return new P(this.redBalls.map(s=>s),this.blueBalls.map(s=>s),this.qty)}}class ps{constructor(){this.winCounts=[0,0,0,0,0,0],this.winPrizes=[0,0,0,0,0,0],this.winTotalPrize=0}}class ts{constructor(){this.winCounts=[0,0,0,0,0,0],this.winPrizes=[0,0,0,0,0,0],this.winTotalPrize=0,this.results=[]}addResult(s){this.results.length>=100&&this.results.shift(),this.results.push(s);for(let t=0;t<6;t++)this.winCounts[t]+=s.winCounts[t],this.winPrizes[t]+=s.winPrizes[t],this.winTotalPrize+=s.winPrizes[t]}}const O=(p,s)=>$(p,p-s+1)/$(s),$=(p,s=0)=>p===0||p<s?1:p*$(p-1,s),es=(p,s)=>O(p,6)/O(33,6)*s/16,Es=L({__name:"double-ball-circle",props:{ball:{},colorReverse:{type:Boolean,default:!1},size:{default:40},fontSize:{default:14}},setup(p){const s=p,t=z(()=>{const n=s.size+"px";return{width:n,height:n,lineHeight:n,"font-size":s.fontSize+"px"}});return(n,g)=>(d(),u("div",{class:Z(["ball",[{checked:n.colorReverse?!n.ball.checked:n.ball.checked},n.ball.color]]),style:ss(t.value)},B(n.ball.number),7))}}),T=H(Es,[["__scopeId","data-v-d59130b7"]]),rs=(p,s=3,t=",")=>{let n=p+"",g=n.indexOf(".");for(g===-1?g=n.length-s:g-=s;g>0;)n=n.slice(0,g)+t+n.slice(g),g-=s;return n},ds=p=>(ls("data-v-769f346c"),p=p(),hs(),p),gs={class:"flex-column wh100p"},ys={class:"flex-horiz ball-container"},Fs={class:"flex-horiz box-card pa-md flex-wrap flex-grow",style:{"justify-content":"flex-start","align-content":"flex-start"}},cs={class:"flex-horiz flex-wrap flex-not-shk ml-md pa-md box-card",style:{width:"37%","justify-content":"flex-start","align-content":"flex-start"}},us={class:"box-card pa-md mtb-md"},os={class:""},bs={class:"flex-horiz pa-sm flex-wrap"},Cs={key:0,class:"text-center"},ms={class:"box-card mt-md flex-horiz pa-md",style:{height:"250px"}},Bs={class:"flex-column flex-grow overflow-h"},As={class:"flex-not-shk flex-horiz"},Ds=ds(()=>y("div",{class:"flex-grow"},null,-1)),fs={class:"flex-grow pa-xs",style:{overflow:"auto"}},qs={class:"flex-horiz mb-xs plr-xs pt-xs",style:{"background-color":"rgb(var(--purple-1))","border-radius":"4px"}},vs={class:"flex-horiz flex-grow flex-wrap"},_s={class:"flex-not-shk"},xs={class:"text-center"},ws=L({__name:"double-ball",setup(p){const s=C("wait"),t=C(),n=C(Array(33).fill(0).map((k,i)=>new w("red",i+1))),g=C(Array(16).fill(0).map((k,i)=>new w("blue",i+1))),o=k=>{k.checked=!k.checked},b=z(()=>{const k=n.value.filter(a=>a.checked),i=g.value.filter(a=>a.checked);return new P(k,i)}),F=C([]),R=z(()=>F.value.reduce((k,i)=>k+i.totalPrice,0)),I=()=>{const k=n.value.map(a=>a.number),i=[];for(let a=0;a<6;a++){const e=Math.floor(Math.random()*k.length);i.push(k[e]),k.splice(e,1)}return new P(i.map(a=>new w("red",a)),[new w("blue",Math.floor(Math.random()*16)+1)])},M=k=>{const i=[];for(let a=0;a<k;a++)i.push(I());return i},S=k=>{F.value.push(...k)},J=k=>{const i=F.value.findIndex(a=>a===k);i>=0&&F.value.splice(i,1)},f=C(52*3),Q=z(()=>{const a=Math.floor(f.value/156),e=Math.ceil(f.value%156/3);let A="";return a>0&&(A+=` ${a} 年`),e>0&&(A+=` ${e} 周`),A});let V=null;is(()=>clearTimeout(V));const G=()=>{if(F.value.length<1)return U.error("请先添加彩票到购物车");if(f.value<1)return U.error("开奖次数必须大于 0");t.value=new ts;const k=(i=0)=>{if(i>=F.value.length){s.value="opened";return}const a=new ps;a.ticket=I();for(let e of F.value)e.computeWin(a.ticket),a.sort=i,a.winCounts[e.win]+=e.qty,a.winPrizes[e.win]+=e.winPrize,a.winTotalPrize+=e.winPrize;t.value.addResult(a),V=setTimeout(k.bind(this,i+1),0)};clearTimeout(V),k()};C([]);const N=C(!1);return(k,i)=>{const a=c("a-modal"),e=c("a-tag"),A=c("a-space"),x=c("icon-plus"),D=c("a-button"),j=c("a-divider"),K=c("icon-delete"),X=c("icon-poweroff"),Y=c("a-input-number");return d(),u("div",gs,[h(a,{visible:N.value,"onUpdate:visible":i[0]||(i[0]=E=>N.value=E),title:"开奖结果"},null,8,["visible"]),y("div",ys,[y("div",Fs,[(d(!0),u(v,null,_(n.value,E=>(d(),m(T,{class:"ma-sm",ball:E,onClick:q=>o(E)},{default:l(()=>[r(B(E.number),1)]),_:2},1032,["ball","onClick"]))),256))]),y("div",cs,[(d(!0),u(v,null,_(g.value,E=>(d(),m(T,{class:"ma-sm",ball:E,onClick:q=>o(E)},{default:l(()=>[r(B(E.number),1)]),_:2},1032,["ball","onClick"]))),256))])]),y("div",us,[y("div",os,[b.value.isValid?(d(),m(A,{key:1},{default:l(()=>[b.value.isComplex?(d(),m(e,{key:0,color:"red"},{default:l(()=>[r("复式")]),_:1})):(d(),m(e,{key:1,color:"blue"},{default:l(()=>[r("单注")]),_:1})),h(e,{color:"blue"},{default:l(()=>[r("票价："+B(b.value.totalPrice)+"元",1)]),_:1}),h(e,{color:"cyan"},{default:l(()=>[r("一等奖概率："+B((b.value.probability*100).toFixed(6))+" %",1)]),_:1})]),_:1})):(d(),m(e,{key:0,color:"red"},{default:l(()=>[r("至少选择 6 个红球 和 1 个蓝球")]),_:1}))]),y("div",bs,[(d(!0),u(v,null,_(b.value.getBalls(),E=>(d(),m(T,{class:"ma-sm",ball:E,"color-reverse":!0,onClick:q=>o(E)},null,8,["ball","onClick"]))),256))]),b.value.isValid?(d(),u("div",Cs,[h(D,{type:"primary"},{icon:l(()=>[h(x)]),default:l(()=>[r(" 添加到购物车")]),_:1})])):as("",!0)]),y("div",ms,[y("div",Bs,[y("div",As,[h(e,{color:"blue"},{default:l(()=>[r("购物车")]),_:1}),h(e,{class:"ml-xs"},{default:l(()=>[r("总金额： "+B(ns(rs)(R.value)),1)]),_:1}),Ds,h(D,{size:"mini",type:"primary",onClick:i[1]||(i[1]=E=>F.value=[])},{default:l(()=>[r("清空")]),_:1})]),h(j,{style:{"margin-top":"10px","margin-bottom":"0"}}),y("div",fs,[(d(!0),u(v,null,_(F.value,E=>(d(),u("div",qs,[y("div",vs,[(d(!0),u(v,null,_(E.getBalls(),q=>(d(),m(T,{class:"mr-xs mb-xs",size:20,"font-size":10,ball:q},null,8,["ball"]))),256))]),y("div",_s,[h(K,{class:"cursor-p",onClick:q=>J(E)},null,8,["onClick"])])]))),256))])]),h(j,{direction:"vertical"}),h(A,{direction:"vertical",class:"flex-not-shk ml-md",style:{width:"140px"}},{default:l(()=>[h(D,{long:"",type:"primary",onClick:i[2]||(i[2]=E=>S(M(1)))},{icon:l(()=>[h(x)]),default:l(()=>[r(" 随机 1 注 ")]),_:1}),h(D,{long:"",type:"primary",onClick:i[3]||(i[3]=E=>S(M(10)))},{icon:l(()=>[h(x)]),default:l(()=>[r(" 随机 10 注 ")]),_:1}),h(D,{long:"",type:"primary",onClick:i[4]||(i[4]=E=>S(M(100)))},{icon:l(()=>[h(x)]),default:l(()=>[r(" 随机 100 注 ")]),_:1}),h(D,{long:"",type:"primary",status:"success",onClick:G},{icon:l(()=>[h(X)]),default:l(()=>[r(" 开奖 ")]),_:1}),h(Y,{modelValue:f.value,"onUpdate:modelValue":i[5]||(i[5]=E=>f.value=E)},{prefix:l(()=>[r("开")]),suffix:l(()=>[r("期    ")]),_:1},8,["modelValue"]),y("div",xs,[h(e,{class:""},{default:l(()=>[r("约"+B(Q.value),1)]),_:1})])]),_:1})]),h(a)])}}}),Ts=H(ws,[["__scopeId","data-v-769f346c"]]),zs=ks("",2),Ss=JSON.parse('{"title":"","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"games/double-ball.md","filePath":"games/double-ball.md"}'),Ps={name:"games/double-ball.md"},Vs=Object.assign(Ps,{setup(p){return(s,t)=>{const n=c("ClientOnly");return d(),u("div",null,[h(n,null,{default:l(()=>[h(Ts)]),_:1}),zs])}}});export{Ss as __pageData,Vs as default};
