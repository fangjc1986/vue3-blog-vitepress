const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/index.es.CS2ym6un.js","assets/chunks/framework.BULi5HC7.js"])))=>i.map(i=>d[i]);
import{e as ts,r as w,c as j,ac as Es,o as hs,ao as fs,h as _,j as ns,k as R,l as O,m as D,q as K,p as ms,P as bs,G as vs,w as Fs,C as xs,n as is,I as X,a5 as B,t as S,z as es,R as rs}from"./chunks/framework.BULi5HC7.js";const Cs=ts({__name:"v3a-color-picker",props:{modelValue:{default:"#000000"},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:s}){const i=t,n=s,e=k=>{n("update:modelValue",k),h.value=!1},h=w(!1),a=w("medium"),l={large:"25px",medium:"20px",small:"15px",mini:"12px"},r=j(()=>({width:l[a.value]??"20px",height:l[a.value]??"20px",backgroundColor:i.modelValue,"border-radius":"3px",overflow:"hidden",border:"1px solid #ccc",cursor:i.disabled?"not-allowed":"pointer"})),o=Es(null);return hs(()=>{fs(()=>import("./chunks/index.es.CS2ym6un.js"),__vite__mapDeps([0,1])).then(k=>{o.value=k.ColorPicker})}),(k,c)=>{const y=_("a-popover");return R(),ns(y,{"popup-visible":h.value,"onUpdate:popupVisible":c[0]||(c[0]=f=>h.value=f),position:"right",trigger:"click","content-style":{padding:"2px 5px 5px 5px"}},{content:O(()=>[o.value?(R(),ns(bs(o.value),vs({key:0},k.$attrs,{"pure-color":k.modelValue,"disable-alpha":!0,"is-widget":!0,"onUpdate:pureColor":e}),null,16,["pure-color"])):ms("",!0)]),default:O(()=>[D("div",{style:K(r.value)},null,4)]),_:1},8,["popup-visible"])}}});var ws=Object.defineProperty,Ss=(t,s,i)=>s in t?ws(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i,d=(t,s,i)=>(Ss(t,typeof s!="symbol"?s+"":s,i),i);const G=(t,s)=>Number(t.toFixed(s)),Ds=(t,s=300)=>{let i;return(...n)=>{clearTimeout(i),i=setTimeout(()=>{t(...n)},s)}},Ps=(t,s=300)=>{let i;return(...n)=>{i||(i=setTimeout(()=>{t(...n),i=0},s))}};function Ms(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var os={exports:{}},ds={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ps={exports:{}},As=function(s){return!s||typeof s=="string"?!1:s instanceof Array||Array.isArray(s)||s.length>=0&&(s.splice instanceof Function||Object.getOwnPropertyDescriptor(s,s.length-1)&&s.constructor.name!=="String")},Bs=As,Ls=Array.prototype.concat,qs=Array.prototype.slice,as=ps.exports=function(s){for(var i=[],n=0,e=s.length;n<e;n++){var h=s[n];Bs(h)?i=Ls.call(i,qs.call(h)):i.push(h)}return i};as.wrap=function(t){return function(){return t(as(arguments))}};var _s=ps.exports,H=ds,N=_s,ks=Object.hasOwnProperty,cs=Object.create(null);for(var Y in H)ks.call(H,Y)&&(cs[H[Y]]=Y);var F=os.exports={to:{},get:{}};F.get=function(t){var s=t.substring(0,3).toLowerCase(),i,n;switch(s){case"hsl":i=F.get.hsl(t),n="hsl";break;case"hwb":i=F.get.hwb(t),n="hwb";break;default:i=F.get.rgb(t),n="rgb";break}return i?{model:n,value:i}:null};F.get.rgb=function(t){if(!t)return null;var s=/^#([a-f0-9]{3,4})$/i,i=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,e=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,h=/^(\w+)$/,a=[0,0,0,1],l,r,o;if(l=t.match(i)){for(o=l[2],l=l[1],r=0;r<3;r++){var k=r*2;a[r]=parseInt(l.slice(k,k+2),16)}o&&(a[3]=parseInt(o,16)/255)}else if(l=t.match(s)){for(l=l[1],o=l[3],r=0;r<3;r++)a[r]=parseInt(l[r]+l[r],16);o&&(a[3]=parseInt(o+o,16)/255)}else if(l=t.match(n)){for(r=0;r<3;r++)a[r]=parseInt(l[r+1],0);l[4]&&(l[5]?a[3]=parseFloat(l[4])*.01:a[3]=parseFloat(l[4]))}else if(l=t.match(e)){for(r=0;r<3;r++)a[r]=Math.round(parseFloat(l[r+1])*2.55);l[4]&&(l[5]?a[3]=parseFloat(l[4])*.01:a[3]=parseFloat(l[4]))}else return(l=t.match(h))?l[1]==="transparent"?[0,0,0,0]:ks.call(H,l[1])?(a=H[l[1]],a[3]=1,a):null:null;for(r=0;r<3;r++)a[r]=P(a[r],0,255);return a[3]=P(a[3],0,1),a};F.get.hsl=function(t){if(!t)return null;var s=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,i=t.match(s);if(i){var n=parseFloat(i[4]),e=(parseFloat(i[1])%360+360)%360,h=P(parseFloat(i[2]),0,100),a=P(parseFloat(i[3]),0,100),l=P(isNaN(n)?1:n,0,1);return[e,h,a,l]}return null};F.get.hwb=function(t){if(!t)return null;var s=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,i=t.match(s);if(i){var n=parseFloat(i[4]),e=(parseFloat(i[1])%360+360)%360,h=P(parseFloat(i[2]),0,100),a=P(parseFloat(i[3]),0,100),l=P(isNaN(n)?1:n,0,1);return[e,h,a,l]}return null};F.to.hex=function(){var t=N(arguments);return"#"+I(t[0])+I(t[1])+I(t[2])+(t[3]<1?I(Math.round(t[3]*255)):"")};F.to.rgb=function(){var t=N(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};F.to.rgb.percent=function(){var t=N(arguments),s=Math.round(t[0]/255*100),i=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+s+"%, "+i+"%, "+n+"%)":"rgba("+s+"%, "+i+"%, "+n+"%, "+t[3]+")"};F.to.hsl=function(){var t=N(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};F.to.hwb=function(){var t=N(arguments),s="";return t.length>=4&&t[3]!==1&&(s=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+s+")"};F.to.keyword=function(t){return cs[t.slice(0,3)]};function P(t,s,i){return Math.min(Math.max(s,t),i)}function I(t){var s=Math.round(t).toString(16).toUpperCase();return s.length<2?"0"+s:s}var Os=os.exports;const z=ds,us={};for(const t of Object.keys(z))us[z[t]]=t;const p={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var ys=p;for(const t of Object.keys(p)){if(!("channels"in p[t]))throw new Error("missing channels property: "+t);if(!("labels"in p[t]))throw new Error("missing channel labels property: "+t);if(p[t].labels.length!==p[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:s,labels:i}=p[t];delete p[t].channels,delete p[t].labels,Object.defineProperty(p[t],"channels",{value:s}),Object.defineProperty(p[t],"labels",{value:i})}p.rgb.hsl=function(t){const s=t[0]/255,i=t[1]/255,n=t[2]/255,e=Math.min(s,i,n),h=Math.max(s,i,n),a=h-e;let l,r;h===e?l=0:s===h?l=(i-n)/a:i===h?l=2+(n-s)/a:n===h&&(l=4+(s-i)/a),l=Math.min(l*60,360),l<0&&(l+=360);const o=(e+h)/2;return h===e?r=0:o<=.5?r=a/(h+e):r=a/(2-h-e),[l,r*100,o*100]};p.rgb.hsv=function(t){let s,i,n,e,h;const a=t[0]/255,l=t[1]/255,r=t[2]/255,o=Math.max(a,l,r),k=o-Math.min(a,l,r),c=function(y){return(o-y)/6/k+1/2};return k===0?(e=0,h=0):(h=k/o,s=c(a),i=c(l),n=c(r),a===o?e=n-i:l===o?e=1/3+s-n:r===o&&(e=2/3+i-s),e<0?e+=1:e>1&&(e-=1)),[e*360,h*100,o*100]};p.rgb.hwb=function(t){const s=t[0],i=t[1];let n=t[2];const e=p.rgb.hsl(t)[0],h=1/255*Math.min(s,Math.min(i,n));return n=1-1/255*Math.max(s,Math.max(i,n)),[e,h*100,n*100]};p.rgb.cmyk=function(t){const s=t[0]/255,i=t[1]/255,n=t[2]/255,e=Math.min(1-s,1-i,1-n),h=(1-s-e)/(1-e)||0,a=(1-i-e)/(1-e)||0,l=(1-n-e)/(1-e)||0;return[h*100,a*100,l*100,e*100]};function Ts(t,s){return(t[0]-s[0])**2+(t[1]-s[1])**2+(t[2]-s[2])**2}p.rgb.keyword=function(t){const s=us[t];if(s)return s;let i=1/0,n;for(const e of Object.keys(z)){const h=z[e],a=Ts(t,h);a<i&&(i=a,n=e)}return n};p.keyword.rgb=function(t){return z[t]};p.rgb.xyz=function(t){let s=t[0]/255,i=t[1]/255,n=t[2]/255;s=s>.04045?((s+.055)/1.055)**2.4:s/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;const e=s*.4124+i*.3576+n*.1805,h=s*.2126+i*.7152+n*.0722,a=s*.0193+i*.1192+n*.9505;return[e*100,h*100,a*100]};p.rgb.lab=function(t){const s=p.rgb.xyz(t);let i=s[0],n=s[1],e=s[2];i/=95.047,n/=100,e/=108.883,i=i>.008856?i**(1/3):7.787*i+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,e=e>.008856?e**(1/3):7.787*e+16/116;const h=116*n-16,a=500*(i-n),l=200*(n-e);return[h,a,l]};p.hsl.rgb=function(t){const s=t[0]/360,i=t[1]/100,n=t[2]/100;let e,h,a;if(i===0)return a=n*255,[a,a,a];n<.5?e=n*(1+i):e=n+i-n*i;const l=2*n-e,r=[0,0,0];for(let o=0;o<3;o++)h=s+1/3*-(o-1),h<0&&h++,h>1&&h--,6*h<1?a=l+(e-l)*6*h:2*h<1?a=e:3*h<2?a=l+(e-l)*(2/3-h)*6:a=l,r[o]=a*255;return r};p.hsl.hsv=function(t){const s=t[0];let i=t[1]/100,n=t[2]/100,e=i;const h=Math.max(n,.01);n*=2,i*=n<=1?n:2-n,e*=h<=1?h:2-h;const a=(n+i)/2,l=n===0?2*e/(h+e):2*i/(n+i);return[s,l*100,a*100]};p.hsv.rgb=function(t){const s=t[0]/60,i=t[1]/100;let n=t[2]/100;const e=Math.floor(s)%6,h=s-Math.floor(s),a=255*n*(1-i),l=255*n*(1-i*h),r=255*n*(1-i*(1-h));switch(n*=255,e){case 0:return[n,r,a];case 1:return[l,n,a];case 2:return[a,n,r];case 3:return[a,l,n];case 4:return[r,a,n];case 5:return[n,a,l]}};p.hsv.hsl=function(t){const s=t[0],i=t[1]/100,n=t[2]/100,e=Math.max(n,.01);let h,a;a=(2-i)*n;const l=(2-i)*e;return h=i*e,h/=l<=1?l:2-l,h=h||0,a/=2,[s,h*100,a*100]};p.hwb.rgb=function(t){const s=t[0]/360;let i=t[1]/100,n=t[2]/100;const e=i+n;let h;e>1&&(i/=e,n/=e);const a=Math.floor(6*s),l=1-n;h=6*s-a,a&1&&(h=1-h);const r=i+h*(l-i);let o,k,c;switch(a){default:case 6:case 0:o=l,k=r,c=i;break;case 1:o=r,k=l,c=i;break;case 2:o=i,k=l,c=r;break;case 3:o=i,k=r,c=l;break;case 4:o=r,k=i,c=l;break;case 5:o=l,k=i,c=r;break}return[o*255,k*255,c*255]};p.cmyk.rgb=function(t){const s=t[0]/100,i=t[1]/100,n=t[2]/100,e=t[3]/100,h=1-Math.min(1,s*(1-e)+e),a=1-Math.min(1,i*(1-e)+e),l=1-Math.min(1,n*(1-e)+e);return[h*255,a*255,l*255]};p.xyz.rgb=function(t){const s=t[0]/100,i=t[1]/100,n=t[2]/100;let e,h,a;return e=s*3.2406+i*-1.5372+n*-.4986,h=s*-.9689+i*1.8758+n*.0415,a=s*.0557+i*-.204+n*1.057,e=e>.0031308?1.055*e**(1/2.4)-.055:e*12.92,h=h>.0031308?1.055*h**(1/2.4)-.055:h*12.92,a=a>.0031308?1.055*a**(1/2.4)-.055:a*12.92,e=Math.min(Math.max(0,e),1),h=Math.min(Math.max(0,h),1),a=Math.min(Math.max(0,a),1),[e*255,h*255,a*255]};p.xyz.lab=function(t){let s=t[0],i=t[1],n=t[2];s/=95.047,i/=100,n/=108.883,s=s>.008856?s**(1/3):7.787*s+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;const e=116*i-16,h=500*(s-i),a=200*(i-n);return[e,h,a]};p.lab.xyz=function(t){const s=t[0],i=t[1],n=t[2];let e,h,a;h=(s+16)/116,e=i/500+h,a=h-n/200;const l=h**3,r=e**3,o=a**3;return h=l>.008856?l:(h-16/116)/7.787,e=r>.008856?r:(e-16/116)/7.787,a=o>.008856?o:(a-16/116)/7.787,e*=95.047,h*=100,a*=108.883,[e,h,a]};p.lab.lch=function(t){const s=t[0],i=t[1],n=t[2];let e;e=Math.atan2(n,i)*360/2/Math.PI,e<0&&(e+=360);const a=Math.sqrt(i*i+n*n);return[s,a,e]};p.lch.lab=function(t){const s=t[0],i=t[1],e=t[2]/360*2*Math.PI,h=i*Math.cos(e),a=i*Math.sin(e);return[s,h,a]};p.rgb.ansi16=function(t,s=null){const[i,n,e]=t;let h=s===null?p.rgb.hsv(t)[2]:s;if(h=Math.round(h/50),h===0)return 30;let a=30+(Math.round(e/255)<<2|Math.round(n/255)<<1|Math.round(i/255));return h===2&&(a+=60),a};p.hsv.ansi16=function(t){return p.rgb.ansi16(p.hsv.rgb(t),t[2])};p.rgb.ansi256=function(t){const s=t[0],i=t[1],n=t[2];return s===i&&i===n?s<8?16:s>248?231:Math.round((s-8)/247*24)+232:16+36*Math.round(s/255*5)+6*Math.round(i/255*5)+Math.round(n/255*5)};p.ansi16.rgb=function(t){let s=t%10;if(s===0||s===7)return t>50&&(s+=3.5),s=s/10.5*255,[s,s,s];const i=(~~(t>50)+1)*.5,n=(s&1)*i*255,e=(s>>1&1)*i*255,h=(s>>2&1)*i*255;return[n,e,h]};p.ansi256.rgb=function(t){if(t>=232){const h=(t-232)*10+8;return[h,h,h]}t-=16;let s;const i=Math.floor(t/36)/5*255,n=Math.floor((s=t%36)/6)/5*255,e=s%6/5*255;return[i,n,e]};p.rgb.hex=function(t){const i=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".substring(i.length)+i};p.hex.rgb=function(t){const s=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!s)return[0,0,0];let i=s[0];s[0].length===3&&(i=i.split("").map(l=>l+l).join(""));const n=parseInt(i,16),e=n>>16&255,h=n>>8&255,a=n&255;return[e,h,a]};p.rgb.hcg=function(t){const s=t[0]/255,i=t[1]/255,n=t[2]/255,e=Math.max(Math.max(s,i),n),h=Math.min(Math.min(s,i),n),a=e-h;let l,r;return a<1?l=h/(1-a):l=0,a<=0?r=0:e===s?r=(i-n)/a%6:e===i?r=2+(n-s)/a:r=4+(s-i)/a,r/=6,r%=1,[r*360,a*100,l*100]};p.hsl.hcg=function(t){const s=t[1]/100,i=t[2]/100,n=i<.5?2*s*i:2*s*(1-i);let e=0;return n<1&&(e=(i-.5*n)/(1-n)),[t[0],n*100,e*100]};p.hsv.hcg=function(t){const s=t[1]/100,i=t[2]/100,n=s*i;let e=0;return n<1&&(e=(i-n)/(1-n)),[t[0],n*100,e*100]};p.hcg.rgb=function(t){const s=t[0]/360,i=t[1]/100,n=t[2]/100;if(i===0)return[n*255,n*255,n*255];const e=[0,0,0],h=s%1*6,a=h%1,l=1-a;let r=0;switch(Math.floor(h)){case 0:e[0]=1,e[1]=a,e[2]=0;break;case 1:e[0]=l,e[1]=1,e[2]=0;break;case 2:e[0]=0,e[1]=1,e[2]=a;break;case 3:e[0]=0,e[1]=l,e[2]=1;break;case 4:e[0]=a,e[1]=0,e[2]=1;break;default:e[0]=1,e[1]=0,e[2]=l}return r=(1-i)*n,[(i*e[0]+r)*255,(i*e[1]+r)*255,(i*e[2]+r)*255]};p.hcg.hsv=function(t){const s=t[1]/100,i=t[2]/100,n=s+i*(1-s);let e=0;return n>0&&(e=s/n),[t[0],e*100,n*100]};p.hcg.hsl=function(t){const s=t[1]/100,n=t[2]/100*(1-s)+.5*s;let e=0;return n>0&&n<.5?e=s/(2*n):n>=.5&&n<1&&(e=s/(2*(1-n))),[t[0],e*100,n*100]};p.hcg.hwb=function(t){const s=t[1]/100,i=t[2]/100,n=s+i*(1-s);return[t[0],(n-s)*100,(1-n)*100]};p.hwb.hcg=function(t){const s=t[1]/100,n=1-t[2]/100,e=n-s;let h=0;return e<1&&(h=(n-e)/(1-e)),[t[0],e*100,h*100]};p.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};p.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};p.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};p.gray.hsl=function(t){return[0,0,t[0]]};p.gray.hsv=p.gray.hsl;p.gray.hwb=function(t){return[0,100,t[0]]};p.gray.cmyk=function(t){return[0,0,0,t[0]]};p.gray.lab=function(t){return[t[0],0,0]};p.gray.hex=function(t){const s=Math.round(t[0]/100*255)&255,n=((s<<16)+(s<<8)+s).toString(16).toUpperCase();return"000000".substring(n.length)+n};p.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};const V=ys;function Ws(){const t={},s=Object.keys(V);for(let i=s.length,n=0;n<i;n++)t[s[n]]={distance:-1,parent:null};return t}function Hs(t){const s=Ws(),i=[t];for(s[t].distance=0;i.length;){const n=i.pop(),e=Object.keys(V[n]);for(let h=e.length,a=0;a<h;a++){const l=e[a],r=s[l];r.distance===-1&&(r.distance=s[n].distance+1,r.parent=n,i.unshift(l))}}return s}function Rs(t,s){return function(i){return s(t(i))}}function zs(t,s){const i=[s[t].parent,t];let n=V[s[t].parent][t],e=s[t].parent;for(;s[e].parent;)i.unshift(s[e].parent),n=Rs(V[s[e].parent][e],n),e=s[e].parent;return n.conversion=i,n}var Ns=function(t){const s=Hs(t),i={},n=Object.keys(s);for(let e=n.length,h=0;h<e;h++){const a=n[h];s[a].parent!==null&&(i[a]=zs(a,s))}return i};const J=ys,Is=Ns,L={},Vs=Object.keys(J);function $s(t){const s=function(...i){const n=i[0];return n==null?n:(n.length>1&&(i=n),t(i))};return"conversion"in t&&(s.conversion=t.conversion),s}function Us(t){const s=function(...i){const n=i[0];if(n==null)return n;n.length>1&&(i=n);const e=t(i);if(typeof e=="object")for(let h=e.length,a=0;a<h;a++)e[a]=Math.round(e[a]);return e};return"conversion"in t&&(s.conversion=t.conversion),s}Vs.forEach(t=>{L[t]={},Object.defineProperty(L[t],"channels",{value:J[t].channels}),Object.defineProperty(L[t],"labels",{value:J[t].labels});const s=Is(t);Object.keys(s).forEach(n=>{const e=s[n];L[t][n]=Us(e),L[t][n].raw=$s(e)})});var Xs=L;const q=Os,v=Xs,gs=["keyword","gray","hex"],Z={};for(const t of Object.keys(v))Z[[...v[t].labels].sort().join("")]=t;const $={};function E(t,s){if(!(this instanceof E))return new E(t,s);if(s&&s in gs&&(s=null),s&&!(s in v))throw new Error("Unknown model: "+s);let i,n;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof E)this.model=t.model,this.color=[...t.color],this.valpha=t.valpha;else if(typeof t=="string"){const e=q.get(t);if(e===null)throw new Error("Unable to parse color from string: "+t);this.model=e.model,n=v[this.model].channels,this.color=e.value.slice(0,n),this.valpha=typeof e.value[n]=="number"?e.value[n]:1}else if(t.length>0){this.model=s||"rgb",n=v[this.model].channels;const e=Array.prototype.slice.call(t,0,n);this.color=Q(e,n),this.valpha=typeof t[n]=="number"?t[n]:1}else if(typeof t=="number")this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;const e=Object.keys(t);"alpha"in t&&(e.splice(e.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);const h=e.sort().join("");if(!(h in Z))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=Z[h];const{labels:a}=v[this.model],l=[];for(i=0;i<a.length;i++)l.push(t[a[i]]);this.color=Q(l)}if($[this.model])for(n=v[this.model].channels,i=0;i<n;i++){const e=$[this.model][i];e&&(this.color[i]=e(this.color[i]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}E.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let s=this.model in q.to?this:this.rgb();s=s.round(typeof t=="number"?t:1);const i=s.valpha===1?s.color:[...s.color,this.valpha];return q.to[s.model](i)},percentString(t){const s=this.rgb().round(typeof t=="number"?t:1),i=s.valpha===1?s.color:[...s.color,this.valpha];return q.to.rgb.percent(i)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const t={},{channels:s}=v[this.model],{labels:i}=v[this.model];for(let n=0;n<s;n++)t[i[n]]=this.color[n];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray(){const t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject(){const t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new E([...this.color.map(js(t)),this.valpha],this.model)},alpha(t){return t!==void 0?new E([...this.color,Math.max(0,Math.min(1,t))],this.model):this.valpha},red:u("rgb",0,g(255)),green:u("rgb",1,g(255)),blue:u("rgb",2,g(255)),hue:u(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:u("hsl",1,g(100)),lightness:u("hsl",2,g(100)),saturationv:u("hsv",1,g(100)),value:u("hsv",2,g(100)),chroma:u("hcg",1,g(100)),gray:u("hcg",2,g(100)),white:u("hwb",1,g(100)),wblack:u("hwb",2,g(100)),cyan:u("cmyk",0,g(100)),magenta:u("cmyk",1,g(100)),yellow:u("cmyk",2,g(100)),black:u("cmyk",3,g(100)),x:u("xyz",0,g(95.047)),y:u("xyz",1,g(100)),z:u("xyz",2,g(108.833)),l:u("lab",0,g(100)),a:u("lab",1),b:u("lab",2),keyword(t){return t!==void 0?new E(t):v[this.model].keyword(this.color)},hex(t){return t!==void 0?new E(t):q.to.hex(this.rgb().round().color)},hexa(t){if(t!==void 0)return new E(t);const s=this.rgb().round().color;let i=Math.round(this.valpha*255).toString(16).toUpperCase();return i.length===1&&(i="0"+i),q.to.hex(s)+i},rgbNumber(){const t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity(){const t=this.rgb().color,s=[];for(const[i,n]of t.entries()){const e=n/255;s[i]=e<=.04045?e/12.92:((e+.055)/1.055)**2.4}return .2126*s[0]+.7152*s[1]+.0722*s[2]},contrast(t){const s=this.luminosity(),i=t.luminosity();return s>i?(s+.05)/(i+.05):(i+.05)/(s+.05)},level(t){const s=this.contrast(t);return s>=7?"AAA":s>=4.5?"AA":""},isDark(){const t=this.rgb().color;return(t[0]*2126+t[1]*7152+t[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const t=this.rgb();for(let s=0;s<3;s++)t.color[s]=255-t.color[s];return t},lighten(t){const s=this.hsl();return s.color[2]+=s.color[2]*t,s},darken(t){const s=this.hsl();return s.color[2]-=s.color[2]*t,s},saturate(t){const s=this.hsl();return s.color[1]+=s.color[1]*t,s},desaturate(t){const s=this.hsl();return s.color[1]-=s.color[1]*t,s},whiten(t){const s=this.hwb();return s.color[1]+=s.color[1]*t,s},blacken(t){const s=this.hwb();return s.color[2]+=s.color[2]*t,s},grayscale(){const t=this.rgb().color,s=t[0]*.3+t[1]*.59+t[2]*.11;return E.rgb(s,s,s)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){const s=this.hsl();let i=s.color[0];return i=(i+t)%360,i=i<0?360+i:i,s.color[0]=i,s},mix(t,s){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);const i=t.rgb(),n=this.rgb(),e=s===void 0?.5:s,h=2*e-1,a=i.alpha()-n.alpha(),l=((h*a===-1?h:(h+a)/(1+h*a))+1)/2,r=1-l;return E.rgb(l*i.red()+r*n.red(),l*i.green()+r*n.green(),l*i.blue()+r*n.blue(),i.alpha()*e+n.alpha()*(1-e))}};for(const t of Object.keys(v)){if(gs.includes(t))continue;const{channels:s}=v[t];E.prototype[t]=function(...i){return this.model===t?new E(this):i.length>0?new E(i,t):new E([...Ks(v[this.model][t].raw(this.color)),this.valpha],t)},E[t]=function(...i){let n=i[0];return typeof n=="number"&&(n=Q(i,s)),new E(n,t)}}function Ys(t,s){return Number(t.toFixed(s))}function js(t){return function(s){return Ys(s,t)}}function u(t,s,i){t=Array.isArray(t)?t:[t];for(const n of t)($[n]||($[n]=[]))[s]=i;return t=t[0],function(n){let e;return n!==void 0?(i&&(n=i(n)),e=this[t](),e.color[s]=n,e):(e=this[t]().color[s],i&&(e=i(e)),e)}}function g(t){return function(s){return Math.max(0,Math.min(t,s))}}function Ks(t){return Array.isArray(t)?t:[t]}function Q(t,s){for(let i=0;i<s;i++)typeof t[i]!="number"&&(t[i]=0);return t}var Gs=E;const Js=Ms(Gs);class U{constructor(){d(this,"radius"),d(this,"fillStyle"),d(this,"strokeStyle"),d(this,"lineWidth")}setRadius(s){return this.radius=s,this}setFillStyle(s){return this.fillStyle=s,this}setStrokeStyle(s){return this.strokeStyle=s,this}setLineWidth(s){return this.lineWidth=s,this}}class m{constructor(s,i,n){d(this,"x"),d(this,"y"),d(this,"line"),d(this,"isHover",!1),d(this,"style",new U().setLineWidth(1).setRadius(3)),d(this,"hoverStyle",new U().setLineWidth(2).setRadius(5)),this.x=s,this.y=i,this.line=n}setStyle(s){return this.style=s||this.style,this}setHoverStyle(s){return this.hoverStyle=s||this.hoverStyle,this}add(s,i){return new m(this.x+s,this.y+i,this.line)}remove(){var s;(s=this.line)==null||s.removePoint(this)}useStyle(s){this.line?(s.strokeStyle=this.line.style.strokeStyle,s.fillStyle=Js(this.line.style.strokeStyle||"#000").lighten(.5).hex()):(s.strokeStyle=this.isHover?this.hoverStyle.strokeStyle:this.style.strokeStyle,s.fillStyle=this.isHover?this.hoverStyle.fillStyle:this.style.fillStyle),s.lineWidth=this.isHover?this.hoverStyle.lineWidth:this.style.lineWidth}setPosition(s){if(this.line){const[i,n]=this.line.getPointsRange(this);this.x=G(Math.min(Math.max(s.x,i.x),n.x),this.line.fixed),this.y=G(Math.min(Math.max(s.y,n.y),i.y),this.line.fixed)}else this.x=s.x,this.y=s.y}}class A{constructor(){d(this,"strokeStyle"),d(this,"lineWidth")}setStrokeStyle(s){return this.strokeStyle=s,this}setLineWidth(s){return this.lineWidth=s,this}}let Zs=0;const Qs=(t,s)=>Math.sqrt((t.x-s.x)**2+(t.y-s.y)**2);class W{constructor(s,i,n=[]){d(this,"start"),d(this,"end"),d(this,"points"),d(this,"style",new A().setStrokeStyle("#000").setLineWidth(1)),d(this,"hoverStyle",new A().setLineWidth(2)),d(this,"isHover",!1),d(this,"xDull","increase"),d(this,"yDull","increase"),d(this,"index",0),d(this,"fixed",4),d(this,"mergeDistance",0),this.start=s,this.start.line=this,this.end=i,this.end.line=this,this.points=n;for(let e of n)e.line=this;this.index=Zs++}mergePoints(){if(this.points.length<2)return;const s=[this.points[0]];for(let i=1;i<this.points.length;i++)Qs(this.points[i],this.points[i-1])>this.mergeDistance&&s.push(this.points[i]);this.points=s}setStyle(s){return this.style=s||this.style,this}setHoverStyle(s){return this.hoverStyle=s||this.hoverStyle,this}setXDull(s){return this.xDull=s,this}setYDull(s){return this.yDull=s,this}setDull(s){return this.xDull=s,this.yDull=s,this}setFixed(s){return this.fixed=s,this}setMergeDistance(s){return this.mergeDistance=s,this}addPoint(s,i=this.points.length){return i>=this.points.length?this.points.push(s):this.points.splice(i,0,s),s.line=this,this}removePoint(s){const i=this.points.indexOf(s);i>-1&&this.points.splice(i,1)}useStyle(s){s.strokeStyle=this.isHover?this.hoverStyle.strokeStyle||this.style.strokeStyle:this.style.strokeStyle,s.lineWidth=this.isHover?this.hoverStyle.lineWidth||this.style.lineWidth:this.style.lineWidth}getPointsRange(s){const i=new m(this.start.x,this.end.y,this),n=new m(this.end.x,this.start.y,this),e=[this.start,...this.points,this.end];for(let h=0;h<e.length-1;h++){const a=e[h];if(s!==a)continue;const l=e[h-1],r=e[h+1];(this.xDull=="increase"||this.xDull=="decrease")&&(i.x=l.x,n.x=r.x),this.yDull=="increase"?(i.y=r.y,n.y=l.y):this.yDull=="decrease"&&(i.y=l.y,n.y=r.y);break}return[i,n]}}class ss{constructor(){d(this,"font","12 Arial"),d(this,"fillStyle","#000")}setFont(s){return this.font=s,this}setFillStyle(s){return this.fillStyle=s,this}}class ls{constructor(s,i,n="left"){d(this,"text"),d(this,"point"),d(this,"align"),d(this,"style",new ss),d(this,"hoverStyle",new ss),d(this,"isHover",!1),this.text=s,this.align=n,this.point=i}setStyle(s){return this.style=s||this.style,this}setHoverStyle(s){return this.hoverStyle=s,this}useStyle(s){s.font=this.isHover?this.hoverStyle.font:this.style.font,s.fillStyle=this.isHover?this.hoverStyle.fillStyle:this.style.fillStyle,s.textAlign=this.align}}class st{constructor(s,i,n=10,e=10){d(this,"xAxisSplit"),d(this,"yAxisSplit"),d(this,"canvas"),d(this,"componentCnf"),d(this,"lines",[]),d(this,"canvasHeight",100),d(this,"canvasWidth",100),d(this,"ctx"),d(this,"xTextMaxWidth",0),d(this,"xTextMaxHeight",0),d(this,"yTextMaxWidth",0),d(this,"yTextMaxHeight",0),d(this,"coordCanvasHeight",0),d(this,"coordCanvasWidth",0),d(this,"xSplitLines"),d(this,"ySplitLines"),d(this,"changingCallback",()=>{}),d(this,"changedCallBack",()=>{}),d(this,"needRefresh",!0),d(this,"drawText",(l,r=0,o=0)=>{l.useStyle(this.ctx);const k=this.point2Canvas(l.point);this.ctx.textAlign=l.align,this.ctx.fillText(l.text,k.x+r,k.y+o)}),d(this,"drawPoint",l=>{const r=this.point2Canvas(l);l.useStyle(this.ctx),this.ctx.beginPath(),this.ctx.arc(r.x,r.y,l.isHover?l.hoverStyle.radius:l.style.radius,0,Math.PI*2),this.ctx.fill(),this.ctx.stroke()}),d(this,"drawLines",(l=[])=>l.forEach(this.drawLine)),d(this,"drawLine",l=>{l.useStyle(this.ctx),this.ctx.beginPath();const r=this.point2Canvas(l.start);this.ctx.moveTo(r.x,r.y);for(let k of l.points){const c=this.point2Canvas(k);this.ctx.lineTo(c.x,c.y)}const o=this.point2Canvas(l.end);this.ctx.lineTo(o.x,o.y),this.ctx.stroke();for(let k of l.points)this.drawPoint(k)}),d(this,"point2Canvas",l=>new m(this.componentCnf.padding+this.yTextMaxWidth+this.componentCnf.textDistance+(l.x-this.componentCnf.xStart)/this.getXLen()*this.coordCanvasWidth,this.canvasHeight-this.componentCnf.padding-this.xTextMaxHeight-this.componentCnf.textDistance-(l.y-this.componentCnf.yStart)/this.getYLen()*this.coordCanvasHeight,l.line)),d(this,"canvas2Point",l=>new m((l.x-this.componentCnf.padding-this.yTextMaxWidth-this.componentCnf.textDistance)/this.coordCanvasWidth*this.getXLen()+this.componentCnf.xStart,(this.canvasHeight-this.componentCnf.padding-this.xTextMaxHeight-this.componentCnf.textDistance-l.y)/this.coordCanvasHeight*this.getYLen()+this.componentCnf.yStart,l.line)),d(this,"distanceToLineCanvas",(l,r,o)=>{const k=this.point2Canvas(l),c=this.point2Canvas(r),y=this.point2Canvas(o);if(!this.hasFootPoint(k,c,y))return Number.MAX_SAFE_INTEGER;const f=y.y-c.y,M=c.x-y.x,x=y.x*c.y-c.x*y.y;return Math.abs(f*k.x+M*k.y+x)/Math.sqrt(f*f+M*M)}),d(this,"distancePointCanvas",(l,r)=>{const o=this.point2Canvas(l),k=this.point2Canvas(r);return Math.sqrt((o.x-k.x)*(o.x-k.x)+(o.y-k.y)*(o.y-k.y))}),d(this,"pointInLine",(l,r,o)=>{const k=l.x,c=l.y,y=r.x,f=r.y,M=o.x,x=o.y;return Math.abs((k-y)*(x-f)-(c-f)*(M-y))<.001}),d(this,"isMouseDown",!1),d(this,"mouseOnPoint"),d(this,"mouseDownPoint"),d(this,"mouseOnLine"),d(this,"mouseDownLine");var h,a;this.xAxisSplit=n,this.yAxisSplit=e,this.canvas=i,this.componentCnf=s,this.ctx=(a=(h=this.canvas)==null?void 0:h.value)==null?void 0:a.getContext("2d")}setChangingCallback(s){return this.changingCallback=s,this}setChangedCallback(s){return this.changedCallBack=s,this}getXLen(){return this.componentCnf.xEnd-this.componentCnf.xStart}getYLen(){return this.componentCnf.yEnd-this.componentCnf.yStart}setNeedRefresh(){this.needRefresh=!0}getCtx(){return this.ctx}draw(s=!1){setTimeout(()=>{var i,n;if(!(!this.needRefresh&&!s)){try{if(this.ctx=(n=(i=this.canvas)==null?void 0:i.value)==null?void 0:n.getContext("2d"),!this.ctx)return;this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.initCoordParam(),this.drawCoord(),this.drawLines(this.lines)}catch(e){console.error(e)}this.needRefresh=!1}})}addLine(s){this.lines.push(s),this.setNeedRefresh(),this.draw(),this.changedCallBack(null,this.lines),this.changingCallback(null,this.lines)}removeLine(s){const i=this.lines.indexOf(s);i>-1&&(this.lines.splice(i,1),this.setNeedRefresh(),this.draw(),this.changingCallback(null,this.lines),this.changedCallBack(null,this.lines))}clearLines(){this.lines=[],this.setNeedRefresh(),this.draw(),this.changingCallback(null,this.lines),this.changedCallBack(null,this.lines)}createPoint(s,i){return new m(s,i).setStyle(this.componentCnf.pointStyle).setHoverStyle(this.componentCnf.pointHoverStyle)}drawCoord(){var s,i;this.ctx.lineWidth=1,this.drawLines(this.xSplitLines),this.drawLines(this.ySplitLines),this.drawLines([new W(this.createPoint(this.componentCnf.xStart,this.componentCnf.yStart),this.createPoint(this.componentCnf.xStart,this.componentCnf.yEnd)).setStyle(this.componentCnf.axisStyle),new W(this.createPoint(this.componentCnf.xStart,this.componentCnf.yStart),this.createPoint(this.componentCnf.xEnd,this.componentCnf.yStart)).setStyle(this.componentCnf.axisStyle)]),(s=this.xSplitLines)==null||s.forEach(n=>{this.drawText(new ls(n.start.x+"",n.start,"center").setStyle(this.componentCnf.textStyle),0,12+this.componentCnf.textDistance)}),(i=this.ySplitLines)==null||i.slice(1).forEach(n=>{this.drawText(new ls(n.start.y+"",n.start,"right").setStyle(this.componentCnf.textStyle),-this.componentCnf.textDistance,5)})}initCoordParam(){var s,i,n,e,h;this.canvasWidth=(i=(s=this.canvas)==null?void 0:s.value)==null?void 0:i.width,this.canvasHeight=(e=(n=this.canvas)==null?void 0:n.value)==null?void 0:e.height;const a=this.splitAxis(this.componentCnf.xStart,this.getXLen(),this.componentCnf.xAxisSplit),l=this.splitAxis(this.componentCnf.yStart,this.getYLen(),this.componentCnf.yAxisSplit);this.ctx.font=((h=this.componentCnf.textStyle)==null?void 0:h.font)||"12px Arial",a.forEach(r=>{this.xTextMaxWidth=Math.max(this.xTextMaxWidth,this.getCtx().measureText(r+"").width),this.xTextMaxHeight=Math.max(this.xTextMaxHeight,12)}),l.forEach(r=>{this.yTextMaxWidth=Math.max(this.yTextMaxWidth,this.getCtx().measureText(r+"").width),this.yTextMaxHeight=Math.max(this.yTextMaxHeight,12)}),this.xSplitLines=a.map(r=>new W(this.createPoint(r,0),new m(r,this.getYLen())).setStyle(r===0?this.componentCnf.axisStyle:this.componentCnf.splitStyle)),this.ySplitLines=l.map(r=>new W(new m(0,r),new m(this.getXLen(),r)).setStyle(r==0?this.componentCnf.axisStyle:this.componentCnf.splitStyle)),this.coordCanvasHeight=this.canvasHeight-this.componentCnf.padding*2-this.componentCnf.textDistance-this.xTextMaxHeight,this.coordCanvasWidth=this.canvasWidth-this.componentCnf.padding*2-this.componentCnf.textDistance-this.yTextMaxWidth}splitAxis(s,i,n){const e=i/n,h=[];for(let a=0;a<=n;a++)h.push(G(s+a*e,1));return h}hasFootPoint(s,i,n){const e=s.x,h=s.y,a=i.x,l=i.y,r=n.x,o=n.y,k=(o-l)/(r-a),c=(e+k*(h-l+k*a))/(1+k*k),y=l+k*(c-a);return c>=Math.min(a,r)&&c<=Math.max(a,r)&&y>=Math.min(l,o)&&y<=Math.max(l,o)}getFootPoint(s,i,n){const e=this.point2Canvas(s),h=this.point2Canvas(i),a=this.point2Canvas(n),l=a.y-h.y,r=h.x-a.x,o=a.x*h.y-h.x*a.y,k=(r*(r*e.x-l*e.y)-l*o)/(l*l+r*r),c=(l*(-r*e.x+l*e.y)-r*o)/(l*l+r*r);return this.canvas2Point(new m(k,c))}setMouseOnPoint(s){this.clearMouseOnPoint(),this.mouseOnPoint=s,this.mouseOnPoint.isHover=!0,this.setMouseOnLine(s.line)}setMouseOnLine(s){s&&(this.clearMouseOnLine(),this.mouseOnLine=s,this.mouseOnLine.isHover=!0)}setMouseDownPoint(s){this.clearMouseDownPoint(),this.mouseDownPoint=s,this.setMouseOnPoint(s),this.setMouseDownLine(s==null?void 0:s.line)}setMouseDownLine(s){s&&(this.clearMouseDownLine(),this.mouseDownLine=s,this.setMouseOnLine(s))}clearMouseOnPoint(){this.mouseOnPoint&&(this.mouseOnPoint.isHover=!1,this.mouseOnPoint=void 0)}clearMouseOnLine(){this.mouseOnLine&&(this.mouseOnLine.isHover=!1,this.mouseOnLine=void 0)}clearMouseDownPoint(){this.mouseDownPoint&&(this.mouseDownPoint=void 0)}clearMouseDownLine(){this.mouseDownLine&&(this.mouseDownLine=void 0)}highlightPointHandler(s){if(this.mouseDownPoint)return this.setNeedRefresh();this.clearMouseOnPoint();let i=this.componentCnf.curDistance,n;for(const e of this.lines)for(const h of e.points){const a=this.distancePointCanvas(h,s);a<i&&(n=h,i=a,this.setNeedRefresh())}n&&this.setMouseOnPoint(n),this.setNeedRefresh()}highlightLineHandler(s){if(this.mouseOnPoint)return this.setMouseOnLine(this.mouseOnPoint.line),!0;this.mouseOnLine&&this.mouseOnLine!=this.mouseDownLine&&(this.clearMouseOnLine(),this.setNeedRefresh());let i=this.componentCnf.curDistance,n;for(let e of this.lines){const h=[e.start,...e.points,e.end];for(let a=0;a<h.length-1;a++){const l=h[a],r=h[a+1],o=this.distanceToLineCanvas(s,l,r);o<i&&(n=e,i=o,this.setNeedRefresh())}}n&&this.setMouseOnLine(n)}movePointHandler(s){if(!this.isMouseDown||!this.mouseDownPoint)return!1;const i=this.canvas2Point(new m(s.offsetX,s.offsetY));this.mouseDownPoint.setPosition(i),this.changingCallback(this.mouseDownPoint,this.lines),this.setNeedRefresh()}onMouseMove(s){const i=this.canvas2Point(new m(s.offsetX,s.offsetY));this.highlightPointHandler(i),this.highlightLineHandler(i),this.movePointHandler(s),this.draw()}addPointOnLine(s,i){const n=[i.start,...i.points,i.end];let e=this.componentCnf.curDistance,h=-1;for(let a=0;a<n.length-1;a++){const l=n[a],r=n[a+1],o=this.distanceToLineCanvas(s,l,r);if(e<o)continue;e=o;const k=this.getFootPoint(s,l,r);this.pointInLine(k,l,r)&&(h=a),h!==-1&&(i.addPoint(s,h),s.setPosition(s),this.setMouseDownPoint(s),this.setNeedRefresh())}}addPointOnLineWithMouseDown(s){if(!this.mouseDownLine||this.mouseDownPoint||this.mouseOnPoint)return!1;const i=this.mouseDownLine;return this.addPointOnLine(s,i)}onMouseDown(s){this.isMouseDown=!0,this.mouseOnPoint&&(this.mouseDownPoint=this.mouseOnPoint),this.mouseOnLine&&(this.mouseDownLine=this.mouseOnLine);const i=this.canvas2Point(new m(s.offsetX,s.offsetY));this.addPointOnLineWithMouseDown(i),this.draw()}onMouseUp(){var s;this.isMouseDown=!1,this.mouseDownPoint&&((s=this.mouseDownPoint.line)==null||s.mergePoints(),this.changedCallBack(this.mouseDownPoint,this.lines)),this.clearMouseDownPoint(),this.clearMouseDownLine(),this.clearMouseOnPoint(),this.clearMouseOnLine()}onMouseLeave(){var s;this.isMouseDown=!1,this.mouseDownPoint&&((s=this.mouseDownPoint.line)==null||s.mergePoints(),this.changedCallBack(this.mouseDownPoint,this.lines)),this.clearMouseOnPoint(),this.clearMouseOnLine(),this.clearMouseDownPoint(),this.clearMouseDownLine()}onMouseRightClick(){var s;(s=this.mouseOnPoint)==null||s.remove(),this.draw(!0)}}const tt=["width","height"],it=ts({__name:"coordinate-draw-line",props:{xStart:{default:0},yStart:{default:0},xEnd:{},yEnd:{},xAxisSplit:{default:10},yAxisSplit:{default:10},splitStyle:{default:()=>new A().setLineWidth(1).setStrokeStyle("#aaa")},axisStyle:{default:()=>new A().setLineWidth(1).setStrokeStyle("#000")},lineStyle:{default:()=>new A().setStrokeStyle("#000").setLineWidth(1)},lineHoverStyle:{default:()=>new A().setStrokeStyle("#000").setLineWidth(2)},pointStyle:{default:()=>new U().setRadius(3).setLineWidth(1)},pointHoverStyle:{default:()=>new U().setRadius(5).setLineWidth(2)},textStyle:{default:()=>new ss().setFillStyle("#000").setFont("12px Arial")},textDistance:{default:5},padding:{default:20},curDistance:{default:5}},emits:["changing","changed"],setup(t,{expose:s,emit:i}){const n=t;s({addLine:x=>{r==null||r.addLine(x)},removeLine:x=>{r==null||r.removeLine(x)},clearLines:()=>{r==null||r.clearLines()},draw:()=>{r==null||r.draw(!0)},getCoordinate:()=>r});const e=w(),h=w(),a=w(800),l=w(480);let r=new st(n,e).setChangingCallback((x,b)=>{i("changing",x,b)}).setChangedCallback((x,b)=>{i("changed",x,b)});const o=()=>{h.value&&(a.value=h.value.clientWidth,l.value=h.value.clientHeight),r.draw(!0)};hs(()=>{o(),y.observe(h.value)}),Fs(()=>n,o,{deep:!0});const k=Ps(o,20),c=Ds(o,20),y=new ResizeObserver(()=>{k(),c()});xs(()=>{y.unobserve(h.value)});const f=j(()=>({width:"100%",height:"100%"})),M=j(()=>({width:"100%",height:"100%"}));return(x,b)=>(R(),is("div",{class:"container",ref_key:"containerRef",ref:h,style:K(M.value)},[D("canvas",{ref_key:"canvasRef",ref:e,style:K(f.value),width:a.value,height:l.value,onMousemove:b[0]||(b[0]=C=>{var T;return(T=B(r))==null?void 0:T.onMouseMove(C)}),onMousedown:b[1]||(b[1]=X(C=>{var T;return(T=B(r))==null?void 0:T.onMouseDown(C)},["left"])),onMouseup:b[2]||(b[2]=X(()=>{var C;return(C=B(r))==null?void 0:C.onMouseUp()},["left"])),onMouseleave:b[3]||(b[3]=()=>{var C;return(C=B(r))==null?void 0:C.onMouseLeave()}),onContextmenu:b[4]||(b[4]=X(()=>{var C;return(C=B(r))==null?void 0:C.onMouseRightClick()},["prevent"]))},null,44,tt)],4))}}),nt=(t,s)=>{const i=t.__vccOpts||t;for(const[n,e]of s)i[n]=e;return i},et=nt(it,[["__scopeId","data-v-2d12163e"]]),at={class:"flex-column"},lt={class:"mb-sm flex-horiz flex-center"},ht=D("div",{class:""},"线宽",-1),rt=D("div",null,"线条颜色：",-1),ot=D("div",null,"是否递增",-1),dt=D("div",{class:"flex-grow"},null,-1),pt={class:""},kt={class:"",style:{height:"400px","background-color":"#fff"}},ct=ts({__name:"coordinate-draw-line-demo1",setup(t){const s=w("#000"),i=w(!0),n=w(1),e=w(),h=()=>{const l=new W(new m(0,0),new m(400,200)).setDull(i.value?"increase":void 0).setFixed(1).setStyle(new A().setLineWidth(n.value).setStrokeStyle(s.value));e.value.addLine(l)},a=()=>{console.log(e.value),e.value.clearLines()};return(l,r)=>{const o=_("a-button"),k=_("a-input-number"),c=_("a-switch"),y=_("a-space");return R(),is("div",at,[D("div",lt,[S(y,null,{default:O(()=>[S(o,{onClick:h},{default:O(()=>[es("添加线条")]),_:1}),ht,S(k,{modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=f=>n.value=f),style:{width:"80px"}},null,8,["modelValue"]),rt,S(Cs,{modelValue:s.value,"onUpdate:modelValue":r[1]||(r[1]=f=>s.value=f)},null,8,["modelValue"]),ot,S(c,{modelValue:i.value,"onUpdate:modelValue":r[2]||(r[2]=f=>i.value=f)},null,8,["modelValue"])]),_:1}),dt,D("div",pt,[S(o,{onClick:a},{default:O(()=>[es("清空")]),_:1})])]),D("div",kt,[S(B(et),{ref_key:"coordRef",ref:e,"x-end":400,"y-end":200},null,512)])])}}}),ut=rs("",15),yt=rs("",23),ft=JSON.parse('{"title":"坐标系线段绘制组件使用手册(coordinate-draw-line)","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"frontend-components/coordinate-draw-line.md","filePath":"frontend-components/coordinate-draw-line.md"}'),gt={name:"frontend-components/coordinate-draw-line.md"},mt=Object.assign(gt,{setup(t){return(s,i)=>{const n=_("ClientOnly");return R(),is("div",null,[ut,S(n,null,{default:O(()=>[S(ct)]),_:1}),yt])}}});export{ft as __pageData,mt as default};
