var I=Object.defineProperty;var W=(s,a,n)=>a in s?I(s,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[a]=n;var _=(s,a,n)=>(W(s,typeof a!="symbol"?a+"":a,n),n);import{M as G}from"./chunks/ai.util.aad4c6f8.js";import{l as m}from"./chunks/lodash.008bc52d.js";import{S as N}from"./chunks/start-over-mask.df5c4d55.js";import{g as O,r as d,_ as V,o as D,c as C,a as b,F as h,h as g,d as w,w as $,i as J,n as q,b as x,e as k}from"./app.1c3b36fa.js";const v=()=>new Array(t).fill("").map(s=>new Array(t).fill(F)),H=O({name:"five-chess",components:{StartOverMask:N},props:{},setup(s,a){const n=d(new S(v(),[])),l=d(1),p=d(new S(v(),[])),o=d(!1),e=new G(2).setEvaluateResult(Z).setIsLeafState(U).setNextLevelState(as),r=()=>{if(l.value!=2||!o.value)return;const c=e.getBestChoiceByState(m.exports.cloneDeep(n.value));!c||(p.value=m.exports.cloneDeep(n.value),n.value=c,A(),o.value=!1)},A=()=>{const c=Y(n.value);c!==F&&(l.value=c===1?3:4);for(const y of n.value.state)for(const i of y)if(i===F)return;l.value=5};return{W:f,B:E,EMPTY:F,RC:t,isAiComputing:o,gameState:l,lastState:p,chessState:n,onClickChess:(c,y)=>{const{state:i,trace:z}=n.value;l.value===2&&(o.value||i[c][y]!==F||(o.value=!0,p.value=m.exports.cloneDeep(n.value),i[c][y]=f,z.push([c,y]),A(),setTimeout(r,10)))},onClickRestart:()=>{n.value=new S(v(),[]),p.value=new S(v(),[]),l.value=2,o.value=!1}}}});class S{constructor(a,n=[],l=!0){_(this,"state");_(this,"trace");this.state=a,this.trace=n}}const K=[[11111,1e5,1e4],[211112,1e6,1e3],[11112,1e5,100],[12111,1e5,100],[11211,1e5,100],[211212,1e6,100],[21112,1e5,100],[21111,1e5,100],[11121,1e5,100],[212112,1e6,100],[11122,1e5,10],[22111,1e5,10],[22111,1e5,10],[11122,1e5,10],[11212,1e5,4],[21211,1e5,4],[22112,1e5,1],[21122,1e5,1]],f=1,E=3,F=2,t=15,R=[],T=[],M=[],P=[];for(let s=0;s<t;s++){const a=[],n=[];for(let l=0;l<t;l++)a.push([l,s]),n.push([s,l]);R.push(n),T.push(a)}for(let s=-t+1;s<t;s++){const a=[],n=[];for(let l=0;l<t;l++){const p=s+l;p<0||p>=t||(a.push([l,p]),n.push([t-l-1,p]))}M.push(a),P.push(n)}const Q=(s,a)=>[R[s],T[a],M[a-s+t-1],P[s+a]],U=s=>Y(s)!==F,Y=({state:s})=>{const a=ps(s);let n=!0;for(const l of a){if(l.length<5)continue;let p=0,o=0;for(const[e,r]of l){if(s[e][r]===E?(o++,p=0):s[e][r]==f?(p++,o=0):p=o=0,s[e][r]===F&&n!==F&&(n=F),o===5)return E;if(p===5)return f}}return n},j=[],B=6;for(let s=0;s<=B*2;s++)j[s]=10**s;const X=[[0,1],[1,0],[1,1],[1,-1]],Z=(s,a)=>{const{state:n,trace:l}=s;new Array(t).fill(!0).map(o=>new Array(t).fill(0));let p=0;return l.forEach(o=>{const[e,r]=o,A=n[e][r],c=[];X.forEach(y=>{const i=ss(ns(n,y,o,A),a,A);p+=i,i&&c.push(i)}),c.sort();for(let y=0;y<c.length-1;y++)p+=c[y]}),p},ss=(s,a,n)=>{let l=0;for(const[p,o,e]of K){let r=s;for(;r!=0;)r-p===Math.floor(r/o)*o&&(l+=e),r=Math.floor(r/10);if(l!==0)break}return n===E?l:-l},ns=(s,a,n,l)=>{let p=0,[o,e]=n;for(let r=-B;r<=B;r++){const[A,c]=[o+a[0]*r,e+a[1]*r],y=j[B-r];!u(A,c)||(s[A][c]===l?p+=y:s[A][c]===F&&(p+=2*y))}return p},as=function*(s,a){const{state:n,trace:l}=a;let p=[];L(n,o=>o!==F).forEach(o=>{ls(n,o[0],o[1]).forEach(e=>{n[e[0]][e[1]]===F&&p.push(e[0]*t+e[1])})}),p=m.exports.shuffle(m.exports.uniq(p)).map(o=>[Math.floor(o/t),o%t]);for(const[o,e]of p)n[o][e]=s?E:f,l.push([o,e]),yield a,n[o][e]=F,l.pop([o,e]),yield a},ls=(s,a,n,l=2)=>{const p=[];for(let o=-l;o<=l;o++){let e=o+a,r=n;u(e,r)&&s[e][r]===F&&p.push([e,r]),e=a,r=n+o,u(e,r)&&s[e][r]===F&&p.push([e,r]),e=a+o,r=n+o,u(e,r)&&s[e][r]===F&&p.push([e,r]),e=a+o,r=n-o,u(e,r)&&s[e][r]===F&&p.push([e,r])}return p},u=(s,a)=>s>=0&&s<t&&a>=0&&a<t,L=(s,a)=>{if(!s)throw Error(s);const n=[];for(let l=0;l<t;l++)for(let p=0;p<t;p++)(a?!!a(s[l][p],l,p):!1)&&n.push([l,p]);return n},ps=s=>{const a=L(s,l=>l!==F),n=new Set;return a.forEach(l=>{Q(l[0],l[1]).forEach(p=>n.add(p))}),[...n]};const os={class:"five-chess vue-component-container"},es={class:"flex-column flex-center-all"},rs={class:"text-center mb-sm pos-r"},cs={key:0,class:""},ts={key:1,class:""},Fs={key:2,class:""},ys={class:"pos-r"},Ds={class:"chess-container-b",style:{"z-index":"0"}},Cs={class:"flex-horiz row-b"},As={class:"flex-horiz grid-b"},is={class:"pos-a chess-container",style:{"z-index":"10"}},bs={class:"flex-horiz row"},us=["onClick"],ms={class:"mb-sm",style:{"font-size":"30px"}},fs={key:0},Es={key:1},ds={key:2};function hs(s,a,n,l,p,o){const e=J("start-over-mask");return D(),C("div",os,[b("div",es,[b("div",rs,[s.gameState!==2?(D(),C("span",cs,"\u7B49\u5F85\u5F00\u59CB")):s.isAiComputing?(D(),C("span",ts," \u7535\u8111\u6B63\u5728\u601D\u8003\u4E2D... ")):(D(),C("span",Fs," \u8F6E\u5230 \u60A8 \u8D70\u4E86 "))]),b("div",ys,[b("div",Ds,[(D(!0),C(h,null,g(s.RC-1,r=>(D(),C("div",Cs,[(D(!0),C(h,null,g(s.RC-1,A=>(D(),C("div",As))),256))]))),256))]),b("div",is,[(D(!0),C(h,null,g(s.chessState.state,(r,A)=>(D(),C("div",bs,[(D(!0),C(h,null,g(r,(c,y)=>(D(),C("div",{class:q(["grid flex-horiz flex-center-all",[s.lastState.state[A][y]!==c?"active":"",c===s.EMPTY?"cursor-p":""]]),onClick:i=>s.onClickChess(A,y)},[c!==s.EMPTY?(D(),C("div",{key:0,class:q(["chess bg-text",[c===s.B?"bg-black":"bg-white"]])},null,2)):x("",!0)],10,us))),256))]))),256))]),w(e,{status:s.gameState,onOnClickStart:s.onClickRestart},{default:$(()=>[b("div",ms,[s.gameState===3?(D(),C("span",fs,"\u4F60\u8D62\u4E86")):s.gameState===4?(D(),C("span",Es,"\u4F60\u8F93\u4E86")):s.gameState===5?(D(),C("span",ds,"\u68CB\u9022\u5BF9\u624B")):x("",!0)])]),_:1},8,["status","onOnClickStart"])])])])}const gs=V(H,[["render",hs],["__scopeId","data-v-7a6da86c"]]),vs=k("",4),Ss=k("",5),Rs=JSON.parse('{"title":"AI \u4E94\u5B50\u68CB","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u73A9\u6CD5","slug":"\u73A9\u6CD5","link":"#\u73A9\u6CD5","children":[]},{"level":2,"title":"\u7B97\u6CD5","slug":"\u7B97\u6CD5","link":"#\u7B97\u6CD5","children":[]},{"level":2,"title":"\u6E90\u7801","slug":"\u6E90\u7801","link":"#\u6E90\u7801","children":[]}],"relativePath":"games/five-chess.md"}'),Bs={name:"games/five-chess.md"},Ts=Object.assign(Bs,{setup(s){return(a,n)=>(D(),C("div",null,[vs,w(gs),Ss]))}});export{Rs as __pageData,Ts as default};
