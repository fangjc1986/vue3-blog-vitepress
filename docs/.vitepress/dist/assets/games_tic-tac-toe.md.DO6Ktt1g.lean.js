import{e as v,r as g,c as S,a0 as x,j as D,k as l,p as e,n as y,z as M,F as b,P as m,u as I,s as C,v as F,m as B,Q as _,aq as T,ar as O}from"./chunks/framework.CJbAbIn5.js";import{_ as o}from"./chunks/lodash.CqsUFoFZ.js";import{M as N}from"./chunks/ai.util.QyAyyn-M.js";import{S as R}from"./chunks/start-over-mask.tqF1ODUF.js";import"./chunks/theme.CxdAxQpP.js";const L=v({name:"tic-tac-toe",components:{StartOverMask:R},props:{},setup(i){let s=g(new Array(9).fill(""));const n=g(1),a=g(!0),h=new N(10).setNextLevelState(P).setIsLeafState(u).setEvaluateResult(w),k=()=>{const t=u(s.value);if(t===!0)return n.value=5;t?n.value=t===E?3:4:s.value.every(r=>r!=="")&&(n.value=5)},d=()=>{if(n.value!==2)return;const t=h.getBestChoiceByState(o.clone(s.value));t!=null&&(s.value=t,a.value=!0,k())};return{X:c,O:E,turnUser:a,gameState:n,chessState:S(()=>o.chunk(s.value,3)),onClickItem:(t,r)=>{if(n.value!==2)return;const p=t*3+r;!a.value||s.value[p]!=""||(a.value=!1,s.value[p]=E,k(),setTimeout(d.bind(this),10))},onClickRestart:()=>{s.value=new Array(9).fill(""),n.value=2,a.value=o.sample([!0,!1]),a.value||setTimeout(d.bind(this),10)}}}}),c="X",E="O",A="",q=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],u=i=>{for(const s of[E,c])if(q.some(n=>n.map(h=>i[h]).every(h=>h===s)))return s;return!!i.every(s=>s!=="")},P=function*(i,s){const n=s.reduce((a,h,k)=>(h===A&&a.push(k),a),[]).sort(()=>Math.random()-.5);for(let a=0;a<n.length;a++)s[n[a]]=i?c:E,yield s,s[n[a]]=A,yield s},w=i=>{const s=u(i);return s===!0?0:s===c?10:-10},V={class:"tic-tac-toe flex-center-all flex-column vue-component-container"},$={class:"mb-sm"},z={class:"bca-border pos-r",style:{padding:"5px"}},X={class:"row flex-horiz flex-center-all"},U=["onClick"],j={key:0,class:"iconfont icon-close-line"},W={key:1,class:"iconfont icon-checkbox-blank-circle-line",style:{"font-size":"0.8em"}},G={class:"mb-sm",style:{"font-size":"30px"}},J={key:0},Q={key:1},Y={key:2};function H(i,s,n,a,h,k){const d=D("start-over-mask");return l(),e("div",V,[y("div",$,"轮到 "+M(i.turnUser?"您":"AI")+" 走棋",1),y("div",z,[(l(!0),e(b,null,m(i.chessState,(t,r)=>(l(),e("div",X,[(l(!0),e(b,null,m(t,(p,f)=>(l(),e("div",{class:I(["item flex-horiz flex-center-all",[p==="O"?"color-primary":"color-error",p===""?"cursor-p":""]]),onClick:as=>i.onClickItem(r,f)},[p===i.X?(l(),e("i",j)):p===i.O?(l(),e("i",W)):C("",!0)],10,U))),256))]))),256)),F(d,{status:i.gameState,onOnClickStart:i.onClickRestart},{default:B(()=>[y("div",G,[i.gameState===3?(l(),e("span",J,"你赢了")):i.gameState===4?(l(),e("span",Q,"你输了")):i.gameState===5?(l(),e("span",Y,"棋逢对手")):C("",!0)])]),_:1},8,["status","onOnClickStart"])])])}const K=x(L,[["render",H],["__scopeId","data-v-b593245e"]]),Z=_("",4),ss=_("",9),ps=JSON.parse('{"title":"AI 井字棋","description":"","frontmatter":{},"headers":[],"relativePath":"games/tic-tac-toe.md","filePath":"games/tic-tac-toe.md"}'),is={name:"games/tic-tac-toe.md"},ks=Object.assign(is,{setup(i){return(s,n)=>{const a=D("ClientOnly");return l(),e("div",null,[Z,F(a,null,{default:B(()=>[F(K)]),_:1}),ss])}}});export{ps as __pageData,ks as default};
